/*Generated automatically*/export const engine = "()=>{var dr=Object.create;var de=Object.defineProperty;var fr=Object.getOwnPropertyDescriptor;var gr=Object.getOwnPropertyNames;var vr=Object.getPrototypeOf,Ir=Object.prototype.hasOwnProperty;var ut=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),yr=(r,e)=>{for(var t in e)de(r,t,{get:e[t],enumerable:!0})},ct=(r,e,t,n)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of gr(e))!Ir.call(r,s)&&s!==t&&de(r,s,{get:()=>e[s],enumerable:!(n=fr(e,s))||n.enumerable});return r};var xr=(r,e,t)=>(t=r!=null?dr(vr(r)):{},ct(e||!r||!r.__esModule?de(t,\"default\",{value:r,enumerable:!0}):t,r)),Er=r=>ct(de({},\"__esModule\",{value:!0}),r);var Vt=ut(j=>{\"use strict\";Object.defineProperty(j,\"__esModule\",{value:!0});function M(r){let e=r||\"\";return function(){throw new Error(\"this method \"+e+\" is abstract! (it has no implementation in class \"+this.constructor.name+\")\")}}function $(r,e){if(!r)throw new Error(e||\"Assertion failed\")}function We(r,e,t){let n;Object.defineProperty(r,e,{get(){return n||(n=t.call(this)),n}})}function Sr(r){return r&&Object.assign({},r)}function St(r,e){let t=[];for(;e-- >0;)t.push(r());return t}function At(r,e){return new Array(e+1).join(r)}function Ee(r,e){return St(()=>r,e)}function Ve(r){let e=[];for(let t=0;t<r.length;t++){let n=r[t];r.lastIndexOf(n)!==t&&e.indexOf(n)<0&&e.push(n)}return e}function _t(r){let e=[];return r.forEach(t=>{e.indexOf(t)<0&&e.push(t)}),e}function Q(r){let e=r[0];return e===e.toUpperCase()}function bt(r){return!Q(r)}function Pt(r,e,t){let n=t||\" \";return r.length<e?At(n,e-r.length)+r:r}function X(){this.strings=[]}X.prototype.append=function(r){this.strings.push(r)};X.prototype.contents=function(){return this.strings.join(\"\")};var De=r=>String.fromCodePoint(parseInt(r,16));function Nt(r){if(r.charAt(0)===\"\\\\\")switch(r.charAt(1)){case\"b\":return\"\\b\";case\"f\":return\"\\f\";case\"n\":return`\n`;case\"r\":return\"\\r\";case\"t\":return\"\t\";case\"v\":return\"\\v\";case\"x\":return De(r.slice(2,4));case\"u\":return r.charAt(2)===\"{\"?De(r.slice(3,-1)):De(r.slice(2,6));default:return r.charAt(1)}else return r}function Ze(r){if(r==null)return String(r);let e=Object.prototype.toString.call(r);try{let t;return r.constructor&&r.constructor.name?t=r.constructor.name:e.indexOf(\"[object \")===0?t=e.slice(8,-1):t=typeof r,t+\": \"+JSON.stringify(String(r))}catch{return e}}var Ar=Object.freeze({__proto__:null,abstract:M,assert:$,defineLazyProperty:We,clone:Sr,repeatFn:St,repeatStr:At,repeat:Ee,getDuplicates:Ve,copyWithoutDuplicates:_t,isSyntactic:Q,isLexical:bt,padLeft:Pt,StringBuffer:X,unescapeCodePoint:Nt,unexpectedObjToString:Ze}),_r={Lu:/\\p{Lu}/u,Ll:/\\p{Ll}/u,Lt:/\\p{Lt}/u,Lm:/\\p{Lm}/u,Lo:/\\p{Lo}/u,Nl:/\\p{Nl}/u,Nd:/\\p{Nd}/u,Mn:/\\p{Mn}/u,Mc:/\\p{Mc}/u,Pc:/\\p{Pc}/u,Zs:/\\p{Zs}/u,L:/\\p{Letter}/u,Ltmo:/\\p{Lt}|\\p{Lm}|\\p{Lo}/u},d=class{constructor(){if(this.constructor===d)throw new Error(\"PExpr cannot be instantiated -- it's abstract\")}withSource(e){return e&&(this.source=e.trimmed()),this}},F=Object.create(d.prototype),T=Object.create(d.prototype),E=class extends d{constructor(e){super(),this.obj=e}},A=class extends d{constructor(e,t){super(),this.from=e,this.to=t,this.matchCodePoint=e.length>1||t.length>1}},_=class extends d{constructor(e){super(),this.index=e}},v=class extends d{constructor(e){super(),this.terms=e}},J=class extends v{constructor(e,t,n){let s=e.rules[t].body;super([n,s]),this.superGrammar=e,this.name=t,this.body=n}},Z=class extends v{constructor(e,t,n,s){let i=e.rules[t].body;super([...n,i,...s]),this.superGrammar=e,this.ruleName=t,this.expansionPos=n.length}},y=class extends d{constructor(e){super(),this.factors=e}},P=class extends d{constructor(e){super(),this.expr=e}},V=class extends P{},G=class extends P{},k=class extends P{};V.prototype.operator=\"*\";G.prototype.operator=\"+\";k.prototype.operator=\"?\";V.prototype.minNumMatches=0;G.prototype.minNumMatches=1;k.prototype.minNumMatches=0;V.prototype.maxNumMatches=Number.POSITIVE_INFINITY;G.prototype.maxNumMatches=Number.POSITIVE_INFINITY;k.prototype.maxNumMatches=1;var N=class extends d{constructor(e){super(),this.expr=e}},O=class extends d{constructor(e){super(),this.expr=e}},L=class extends d{constructor(e){super(),this.expr=e}},f=class extends d{constructor(e,t=[]){super(),this.ruleName=e,this.args=t}isSyntactic(){return Q(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,\"_memoKey\",{value:this.toString()}),this._memoKey}},x=class extends d{constructor(e){super(),this.category=e,this.pattern=_r[e]}};function I(r,e){let t;return e?(t=new Error(e.getLineAndColumnMessage()+r),t.shortMessage=r,t.interval=e):t=new Error(r),t}function je(){return I(\"Interval sources don't match\")}function br(r){let e=new Error;return Object.defineProperty(e,\"message\",{enumerable:!0,get(){return r.message}}),Object.defineProperty(e,\"shortMessage\",{enumerable:!0,get(){return\"Expected \"+r.getExpectedText()}}),e.interval=r.getInterval(),e}function Pr(r,e,t){let n=e?`Grammar ${r} is not declared in namespace '${e}'`:\"Undeclared grammar \"+r;return I(n,t)}function Nr(r,e){return I(\"Grammar \"+r.name+\" is already declared in this namespace\")}function Or(r){return I(`Grammar '${r.name}' does not support incremental parsing`)}function Ot(r,e,t){return I(\"Rule \"+r+\" is not declared in grammar \"+e,t)}function wr(r,e,t){return I(\"Cannot override rule \"+r+\" because it is not declared in \"+e,t)}function Cr(r,e,t){return I(\"Cannot extend rule \"+r+\" because it is not declared in \"+e,t)}function pt(r,e,t,n){let s=\"Duplicate declaration for rule '\"+r+\"' in grammar '\"+e+\"'\";return e!==t&&(s+=\" (originally declared in '\"+t+\"')\"),I(s,n)}function wt(r,e,t,n){return I(\"Wrong number of parameters for rule \"+r+\" (expected \"+e+\", got \"+t+\")\",n)}function Lr(r,e,t,n){return I(\"Wrong number of arguments for rule \"+r+\" (expected \"+e+\", got \"+t+\")\",n)}function ht(r,e,t){return I(\"Duplicate parameter names in rule \"+r+\": \"+e.join(\", \"),t)}function Fr(r,e){return I(\"Invalid parameter to rule \"+r+\": \"+e+\" has arity \"+e.getArity()+\", but parameter expressions must have arity 1\",e.source)}var Tr=\"NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.\";function qr(r,e){return I(\"Cannot apply syntactic rule \"+r+\" from here (inside a lexical context)\",e.source)}function Rr(r){let{ruleName:e}=r;return I(`applySyntactic is for syntactic rules, but '${e}' is a lexical rule. `+Tr,r.source)}function Mr(r){return I(\"applySyntactic is not required here (in a syntactic context)\",r.source)}function mt(r,e){return I(\"Incorrect argument type: expected \"+r,e.source)}function Dr(r){return I(\"'...' can appear at most once in a rule body\",r.source)}function kr(r){let e=r._node;$(e&&e.isNonterminal()&&e.ctorName===\"escapeChar_unicodeCodePoint\");let t=r.children.slice(1,-1).map(s=>s.source),n=t[0].coverageWith(...t.slice(1));return I(`U+${n.contents} is not a valid Unicode code point`,n)}function Ct(r,e){let t=e.length>0?e[e.length-1].args:[],s=\"Nullable expression \"+r.expr.substituteParams(t)+\" is not allowed inside '\"+r.operator+\"' (possible infinite loop)\";if(e.length>0){let i=e.map(o=>new f(o.ruleName,o.args)).join(`\n`);s+=`\nApplication stack (most recent application last):\n`+i}return I(s,r.expr.source)}function Lt(r,e,t,n){return I(\"Rule \"+r+\" involves an alternation which has inconsistent arity (expected \"+e+\", got \"+t+\")\",n.source)}function Br(r){let e=r.map(t=>t.message);return I([\"Errors:\"].concat(e).join(`\n- `),r[0].interval)}function Wr(r,e,t,n){let s=n.slice(0,-1).map(a=>{let p=\"  \"+a[0].name+\" > \"+a[1];return a.length===3?p+\" for '\"+a[2]+\"'\":p}).join(`\n`);s+=`\n  `+e+\" > \"+r;let i=\"\";r===\"_iter\"&&(i=[`\nNOTE: as of Ohm v16, there is no default action for iteration nodes \\u2014 see `,\"  https://ohmjs.org/d/dsa for details.\"].join(`\n`));let o=[`Missing semantic action for '${r}' in ${t} '${e}'.${i}`,\"Action stack (most recent call last):\",s].join(`\n`),l=I(o);return l.name=\"missingSemanticAction\",l}function Vr(r){if(r.length===1)throw r[0];if(r.length>1)throw Br(r)}function jr(r){let e=0;return r.map(n=>{let s=n.toString();return e=Math.max(e,s.length),s}).map(n=>Pt(n,e))}function dt(r,e,t){let n=r.length,s=r.slice(0,t),i=r.slice(t+e.length);return(s+e+i).substr(0,n)}function Gr(...r){let e=this,{offset:t}=e,{repeatStr:n}=Ar,s=new X;s.append(\"Line \"+e.lineNum+\", col \"+e.colNum+`:\n`);let i=jr([e.prevLine==null?0:e.lineNum-1,e.lineNum,e.nextLine==null?0:e.lineNum+1]),o=(u,c,h)=>{s.append(h+i[u]+\" | \"+c+`\n`)};e.prevLine!=null&&o(0,e.prevLine,\"  \"),o(1,e.line,\"> \");let l=e.line.length,a=n(\" \",l+1);for(let u=0;u<r.length;++u){let c=r[u][0],h=r[u][1];$(c>=0&&c<=h,\"range start must be >= 0 and <= end\");let m=t-e.colNum+1;c=Math.max(0,c-m),h=Math.min(h-m,l),a=dt(a,n(\"~\",h-c),c)}let p=2+i[1].length+3;return s.append(n(\" \",p)),a=dt(a,\"^\",e.colNum-1),s.append(a.replace(/ +$/,\"\")+`\n`),e.nextLine!=null&&o(2,e.nextLine,\"  \"),s.contents()}var Ge=[];function Ft(r){Ge.push(r)}function Ur(r){Ge.forEach(e=>{e(r)}),Ge=null}function Ye(r,e){let t=1,n=1,s=0,i=0,o=null,l=null,a=-1;for(;s<e;){let c=r.charAt(s++);c===`\n`?(t++,n=1,a=i,i=s):c!==\"\\r\"&&n++}let p=r.indexOf(`\n`,i);if(p===-1)p=r.length;else{let c=r.indexOf(`\n`,p+1);o=c===-1?r.slice(p):r.slice(p,c),o=o.replace(/^\\r?\\n/,\"\").replace(/\\r$/,\"\")}a>=0&&(l=r.slice(a,i).replace(/\\r?\\n$/,\"\"));let u=r.slice(i,p).replace(/\\r$/,\"\");return{offset:e,lineNum:t,colNum:n,line:u,prevLine:l,nextLine:o,toString:Gr}}function Xe(r,e,...t){return Ye(r,e).toString(...t)}var ft=(()=>{let r=0;return e=>\"\"+e+r++})(),b=class{constructor(e,t,n){this.sourceString=e,this.startIdx=t,this.endIdx=n}get contents(){return this._contents===void 0&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents}get length(){return this.endIdx-this.startIdx}coverageWith(...e){return b.coverage(...e,this)}collapsedLeft(){return new b(this.sourceString,this.startIdx,this.startIdx)}collapsedRight(){return new b(this.sourceString,this.endIdx,this.endIdx)}getLineAndColumn(){return Ye(this.sourceString,this.startIdx)}getLineAndColumnMessage(){let e=[this.startIdx,this.endIdx];return Xe(this.sourceString,this.startIdx,e)}minus(e){if(this.sourceString!==e.sourceString)throw je();return this.startIdx===e.startIdx&&this.endIdx===e.endIdx?[]:this.startIdx<e.startIdx&&e.endIdx<this.endIdx?[new b(this.sourceString,this.startIdx,e.startIdx),new b(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.endIdx&&e.endIdx<this.endIdx?[new b(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.startIdx&&e.startIdx<this.endIdx?[new b(this.sourceString,this.startIdx,e.startIdx)]:[this]}relativeTo(e){if(this.sourceString!==e.sourceString)throw je();return $(this.startIdx>=e.startIdx&&this.endIdx<=e.endIdx,\"other interval does not cover this one\"),new b(this.sourceString,this.startIdx-e.startIdx,this.endIdx-e.startIdx)}trimmed(){let{contents:e}=this,t=this.startIdx+e.match(/^\\s*/)[0].length,n=this.endIdx-e.match(/\\s*$/)[0].length;return new b(this.sourceString,t,n)}subInterval(e,t){let n=this.startIdx+e;return new b(this.sourceString,n,n+t)}};b.coverage=function(r,...e){let{startIdx:t,endIdx:n}=r;for(let s of e){if(s.sourceString!==r.sourceString)throw je();t=Math.min(t,s.startIdx),n=Math.max(n,s.endIdx)}return new b(r.sourceString,t,n)};var Hr=65535,te=class{constructor(e){this.source=e,this.pos=0,this.examinedLength=0}atEnd(){let e=this.pos>=this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),e}next(){let e=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),e}nextCharCode(){let e=this.next();return e&&e.charCodeAt(0)}nextCodePoint(){let e=this.source.slice(this.pos++).codePointAt(0);return e>Hr&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),e}matchString(e,t){let n;if(t){for(n=0;n<e.length;n++){let s=this.next(),i=e[n];if(s==null||s.toUpperCase()!==i.toUpperCase())return!1}return!0}for(n=0;n<e.length;n++)if(this.next()!==e[n])return!1;return!0}sourceSlice(e,t){return this.source.slice(e,t)}interval(e,t){return new b(this.source,e,t||this.pos)}},fe=class{constructor(e,t,n,s,i,o,l){this.matcher=e,this.input=t,this.startExpr=n,this._cst=s,this._cstOffset=i,this._rightmostFailurePosition=o,this._rightmostFailures=l,this.failed()&&(We(this,\"message\",function(){let a=\"Expected \"+this.getExpectedText();return Xe(this.input,this.getRightmostFailurePosition())+a}),We(this,\"shortMessage\",function(){let a=\"expected \"+this.getExpectedText(),p=Ye(this.input,this.getRightmostFailurePosition());return\"Line \"+p.lineNum+\", col \"+p.colNum+\": \"+a}))}succeeded(){return!!this._cst}failed(){return!this.succeeded()}getRightmostFailurePosition(){return this._rightmostFailurePosition}getRightmostFailures(){if(!this._rightmostFailures){this.matcher.setInput(this.input);let e=this.matcher._match(this.startExpr,{tracing:!1,positionToRecordFailures:this.getRightmostFailurePosition()});this._rightmostFailures=e.getRightmostFailures()}return this._rightmostFailures}toString(){return this.succeeded()?\"[match succeeded]\":\"[match failed at position \"+this.getRightmostFailurePosition()+\"]\"}getExpectedText(){if(this.succeeded())throw new Error(\"cannot get expected text of a successful MatchResult\");let e=new X,t=this.getRightmostFailures();t=t.filter(n=>!n.isFluffy());for(let n=0;n<t.length;n++)n>0&&(n===t.length-1?e.append(t.length>2?\", or \":\" or \"):e.append(\", \")),e.append(t[n].toString());return e.contents()}getInterval(){let e=this.getRightmostFailurePosition();return new b(this.input,e,e)}},Ue=class{constructor(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}isActive(e){return this.applicationMemoKeyStack.indexOf(e.toMemoKey())>=0}enter(e){this.applicationMemoKeyStack.push(e.toMemoKey())}exit(){this.applicationMemoKeyStack.pop()}startLeftRecursion(e,t){t.isLeftRecursion=!0,t.headApplication=e,t.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=t;let{applicationMemoKeyStack:n}=this,s=n.indexOf(e.toMemoKey())+1,i=n.slice(s);t.isInvolved=function(o){return i.indexOf(o)>=0},t.updateInvolvedApplicationMemoKeys=function(){for(let o=s;o<n.length;o++){let l=n[o];this.isInvolved(l)||i.push(l)}}}endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion}shouldUseMemoizedResult(e){if(!e.isLeftRecursion)return!0;let{applicationMemoKeyStack:t}=this;for(let n=0;n<t.length;n++){let s=t[n];if(e.isInvolved(s))return!1}return!0}memoize(e,t){return this.memo[e]=t,this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset),t}clearObsoleteEntries(e,t){if(e+this.maxExaminedLength<=t)return;let{memo:n}=this;this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(n).forEach(s=>{let i=n[s];e+i.examinedLength>t?delete n[s]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,i.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,i.rightmostFailureOffset))})}},$r=\"\\u2717\",Kr=\"\\u2713\",zr=\"\\u22C5\",Qr=\"\\u21D2\",Jr=\"\\u2409\",Zr=\"\\u240A\",Yr=\"\\u240D\",He={succeeded:1<<0,isRootNode:1<<1,isImplicitSpaces:1<<2,isMemoized:1<<3,isHeadOfLeftRecursion:1<<4,terminatesLR:1<<5};function Xr(r){return Ee(\" \",r).join(\"\")}function en(r,e,t){let n=Tt(r.slice(e,e+t));return n.length<t?n+Ee(\" \",t-n.length).join(\"\"):n}function Tt(r){return typeof r==\"string\"?r.replace(/ /g,zr).replace(/\\t/g,Jr).replace(/\\n/g,Zr).replace(/\\r/g,Yr):String(r)}var W=class{constructor(e,t,n,s,i,o,l){this.input=e,this.pos=this.pos1=t,this.pos2=n,this.source=new b(e,t,n),this.expr=s,this.bindings=o,this.children=l||[],this.terminatingLREntry=null,this._flags=i?He.succeeded:0}get displayString(){return this.expr.toDisplayString()}clone(){return this.cloneWithExpr(this.expr)}cloneWithExpr(e){let t=new W(this.input,this.pos,this.pos2,e,this.succeeded,this.bindings,this.children);return t.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,t.isImplicitSpaces=this.isImplicitSpaces,t.isMemoized=this.isMemoized,t.isRootNode=this.isRootNode,t.terminatesLR=this.terminatesLR,t.terminatingLREntry=this.terminatingLREntry,t}recordLRTermination(e,t){this.terminatingLREntry=new W(this.input,this.pos,this.pos2,this.expr,!1,[t],[e]),this.terminatingLREntry.terminatesLR=!0}walk(e,t){let n=e;typeof n==\"function\"&&(n={enter:n});function s(i,o,l){let a=!0;n.enter&&n.enter.call(t,i,o,l)===W.prototype.SKIP&&(a=!1),a&&(i.children.forEach(p=>{s(p,i,l+1)}),n.exit&&n.exit.call(t,i,o,l))}this.isRootNode?this.children.forEach(i=>{s(i,null,0)}):s(this,null,0)}toString(){let e=new X;return this.walk((t,n,s)=>{if(!t)return this.SKIP;if(t.expr.constructor.name!==\"Alt\"){if(e.append(en(t.input,t.pos,10)+Xr(s*2+1)),e.append((t.succeeded?Kr:$r)+\" \"+t.displayString),t.isHeadOfLeftRecursion&&e.append(\" (LR)\"),t.succeeded){let o=Tt(t.source.contents);e.append(\" \"+Qr+\"  \"),e.append(typeof o==\"string\"?'\"'+o+'\"':o)}e.append(`\n`)}}),e.contents()}};W.prototype.SKIP={};Object.keys(He).forEach(r=>{let e=He[r];Object.defineProperty(W.prototype,r,{get(){return(this._flags&e)!==0},set(t){t?this._flags|=e:this._flags&=~e}})});d.prototype.allowsSkippingPrecedingSpace=M(\"allowsSkippingPrecedingSpace\");F.allowsSkippingPrecedingSpace=T.allowsSkippingPrecedingSpace=f.prototype.allowsSkippingPrecedingSpace=E.prototype.allowsSkippingPrecedingSpace=A.prototype.allowsSkippingPrecedingSpace=x.prototype.allowsSkippingPrecedingSpace=function(){return!0};v.prototype.allowsSkippingPrecedingSpace=P.prototype.allowsSkippingPrecedingSpace=L.prototype.allowsSkippingPrecedingSpace=O.prototype.allowsSkippingPrecedingSpace=N.prototype.allowsSkippingPrecedingSpace=_.prototype.allowsSkippingPrecedingSpace=y.prototype.allowsSkippingPrecedingSpace=function(){return!1};var le;Ft(r=>{le=r});var ge;d.prototype.assertAllApplicationsAreValid=function(r,e){ge=0,this._assertAllApplicationsAreValid(r,e)};d.prototype._assertAllApplicationsAreValid=M(\"_assertAllApplicationsAreValid\");F._assertAllApplicationsAreValid=T._assertAllApplicationsAreValid=E.prototype._assertAllApplicationsAreValid=A.prototype._assertAllApplicationsAreValid=_.prototype._assertAllApplicationsAreValid=x.prototype._assertAllApplicationsAreValid=function(r,e){};L.prototype._assertAllApplicationsAreValid=function(r,e){ge++,this.expr._assertAllApplicationsAreValid(r,e),ge--};v.prototype._assertAllApplicationsAreValid=function(r,e){for(let t=0;t<this.terms.length;t++)this.terms[t]._assertAllApplicationsAreValid(r,e)};y.prototype._assertAllApplicationsAreValid=function(r,e){for(let t=0;t<this.factors.length;t++)this.factors[t]._assertAllApplicationsAreValid(r,e)};P.prototype._assertAllApplicationsAreValid=N.prototype._assertAllApplicationsAreValid=O.prototype._assertAllApplicationsAreValid=function(r,e){this.expr._assertAllApplicationsAreValid(r,e)};f.prototype._assertAllApplicationsAreValid=function(r,e,t=!1){let n=e.rules[this.ruleName],s=Q(r)&&ge===0;if(!n)throw Ot(this.ruleName,e.name,this.source);if(!t&&Q(this.ruleName)&&!s)throw qr(this.ruleName,this);let i=this.args.length,o=n.formals.length;if(i!==o)throw Lr(this.ruleName,o,i,this.source);let l=le&&n===le.rules.applySyntactic;if(le&&n===le.rules.caseInsensitive&&!(this.args[0]instanceof E))throw mt('a Terminal (e.g. \"abc\")',this.args[0]);if(l){let p=this.args[0];if(!(p instanceof f))throw mt(\"a syntactic rule application\",p);if(!Q(p.ruleName))throw Rr(p);if(s)throw Mr(this)}this.args.forEach(p=>{if(p._assertAllApplicationsAreValid(r,e,l),p.getArity()!==1)throw Fr(this.ruleName,p)})};d.prototype.assertChoicesHaveUniformArity=M(\"assertChoicesHaveUniformArity\");F.assertChoicesHaveUniformArity=T.assertChoicesHaveUniformArity=E.prototype.assertChoicesHaveUniformArity=A.prototype.assertChoicesHaveUniformArity=_.prototype.assertChoicesHaveUniformArity=L.prototype.assertChoicesHaveUniformArity=x.prototype.assertChoicesHaveUniformArity=function(r){};v.prototype.assertChoicesHaveUniformArity=function(r){if(this.terms.length===0)return;let e=this.terms[0].getArity();for(let t=0;t<this.terms.length;t++){let n=this.terms[t];n.assertChoicesHaveUniformArity();let s=n.getArity();if(e!==s)throw Lt(r,e,s,n)}};J.prototype.assertChoicesHaveUniformArity=function(r){let e=this.terms[0].getArity(),t=this.terms[1].getArity();if(e!==t)throw Lt(r,t,e,this.terms[0])};y.prototype.assertChoicesHaveUniformArity=function(r){for(let e=0;e<this.factors.length;e++)this.factors[e].assertChoicesHaveUniformArity(r)};P.prototype.assertChoicesHaveUniformArity=function(r){this.expr.assertChoicesHaveUniformArity(r)};N.prototype.assertChoicesHaveUniformArity=function(r){};O.prototype.assertChoicesHaveUniformArity=function(r){this.expr.assertChoicesHaveUniformArity(r)};f.prototype.assertChoicesHaveUniformArity=function(r){};d.prototype.assertIteratedExprsAreNotNullable=M(\"assertIteratedExprsAreNotNullable\");F.assertIteratedExprsAreNotNullable=T.assertIteratedExprsAreNotNullable=E.prototype.assertIteratedExprsAreNotNullable=A.prototype.assertIteratedExprsAreNotNullable=_.prototype.assertIteratedExprsAreNotNullable=x.prototype.assertIteratedExprsAreNotNullable=function(r){};v.prototype.assertIteratedExprsAreNotNullable=function(r){for(let e=0;e<this.terms.length;e++)this.terms[e].assertIteratedExprsAreNotNullable(r)};y.prototype.assertIteratedExprsAreNotNullable=function(r){for(let e=0;e<this.factors.length;e++)this.factors[e].assertIteratedExprsAreNotNullable(r)};P.prototype.assertIteratedExprsAreNotNullable=function(r){if(this.expr.assertIteratedExprsAreNotNullable(r),this.expr.isNullable(r))throw Ct(this,[])};k.prototype.assertIteratedExprsAreNotNullable=N.prototype.assertIteratedExprsAreNotNullable=O.prototype.assertIteratedExprsAreNotNullable=L.prototype.assertIteratedExprsAreNotNullable=function(r){this.expr.assertIteratedExprsAreNotNullable(r)};f.prototype.assertIteratedExprsAreNotNullable=function(r){this.args.forEach(e=>{e.assertIteratedExprsAreNotNullable(r)})};var ce=class{constructor(e){this.matchLength=e}get ctorName(){throw new Error(\"subclass responsibility\")}numChildren(){return this.children?this.children.length:0}childAt(e){if(this.children)return this.children[e]}indexOfChild(e){return this.children.indexOf(e)}hasChildren(){return this.numChildren()>0}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(this.numChildren()!==1)throw new Error(\"cannot get only child of a node of type \"+this.ctorName+\" (it has \"+this.numChildren()+\" children)\");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error(\"cannot get first child of a \"+this.ctorName+\" node, which has no children\");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error(\"cannot get last child of a \"+this.ctorName+\" node, which has no children\");return this.childAt(this.numChildren()-1)}childBefore(e){let t=this.indexOfChild(e);if(t<0)throw new Error(\"Node.childBefore() called w/ an argument that is not a child\");if(t===0)throw new Error(\"cannot get child before first child\");return this.childAt(t-1)}childAfter(e){let t=this.indexOfChild(e);if(t<0)throw new Error(\"Node.childAfter() called w/ an argument that is not a child\");if(t===this.numChildren()-1)throw new Error(\"cannot get child after last child\");return this.childAt(t+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}},U=class extends ce{get ctorName(){return\"_terminal\"}isTerminal(){return!0}get primitiveValue(){throw new Error(\"The `primitiveValue` property was removed in Ohm v17.\")}},$e=class extends ce{constructor(e,t,n,s){super(s),this.ruleName=e,this.children=t,this.childOffsets=n}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return bt(this.ctorName)}isSyntactic(){return Q(this.ctorName)}},ve=class extends ce{constructor(e,t,n,s){super(n),this.children=e,this.childOffsets=t,this.optional=s}get ctorName(){return\"_iter\"}isIteration(){return!0}isOptional(){return this.optional}};d.prototype.eval=M(\"eval\");F.eval=function(r){let{inputStream:e}=r,t=e.pos,n=e.nextCodePoint();return n!==void 0?(r.pushBinding(new U(String.fromCodePoint(n).length),t),!0):(r.processFailure(t,this),!1)};T.eval=function(r){let{inputStream:e}=r,t=e.pos;return e.atEnd()?(r.pushBinding(new U(0),t),!0):(r.processFailure(t,this),!1)};E.prototype.eval=function(r){let{inputStream:e}=r,t=e.pos;return e.matchString(this.obj)?(r.pushBinding(new U(this.obj.length),t),!0):(r.processFailure(t,this),!1)};A.prototype.eval=function(r){let{inputStream:e}=r,t=e.pos,n=this.matchCodePoint?e.nextCodePoint():e.nextCharCode();return n!==void 0&&this.from.codePointAt(0)<=n&&n<=this.to.codePointAt(0)?(r.pushBinding(new U(String.fromCodePoint(n).length),t),!0):(r.processFailure(t,this),!1)};_.prototype.eval=function(r){return r.eval(r.currentApplication().args[this.index])};L.prototype.eval=function(r){r.enterLexifiedContext();let e=r.eval(this.expr);return r.exitLexifiedContext(),e};v.prototype.eval=function(r){for(let e=0;e<this.terms.length;e++)if(r.eval(this.terms[e]))return!0;return!1};y.prototype.eval=function(r){for(let e=0;e<this.factors.length;e++){let t=this.factors[e];if(!r.eval(t))return!1}return!0};P.prototype.eval=function(r){let{inputStream:e}=r,t=e.pos,n=this.getArity(),s=[],i=[];for(;s.length<n;)s.push([]),i.push([]);let o=0,l=t,a;for(;o<this.maxNumMatches&&r.eval(this.expr);){if(e.pos===l)throw Ct(this,r._applicationStack);l=e.pos,o++;let h=r._bindings.splice(r._bindings.length-n,n),m=r._bindingOffsets.splice(r._bindingOffsets.length-n,n);for(a=0;a<h.length;a++)s[a].push(h[a]),i[a].push(m[a])}if(o<this.minNumMatches)return!1;let p=r.posToOffset(t),u=0;if(o>0){let h=s[n-1],m=i[n-1],g=m[m.length-1]+h[h.length-1].matchLength;p=i[0][0],u=g-p}let c=this instanceof k;for(a=0;a<s.length;a++)r._bindings.push(new ve(s[a],i[a],u,c)),r._bindingOffsets.push(p);return!0};N.prototype.eval=function(r){let{inputStream:e}=r,t=e.pos;r.pushFailuresInfo();let n=r.eval(this.expr);return r.popFailuresInfo(),n?(r.processFailure(t,this),!1):(e.pos=t,!0)};O.prototype.eval=function(r){let{inputStream:e}=r,t=e.pos;return r.eval(this.expr)?(e.pos=t,!0):!1};f.prototype.eval=function(r){let e=r.currentApplication(),t=e?e.args:[],n=this.substituteParams(t),s=r.getCurrentPosInfo();if(s.isActive(n))return n.handleCycle(r);let i=n.toMemoKey(),o=s.memo[i];if(o&&s.shouldUseMemoizedResult(o)){if(r.hasNecessaryInfo(o))return r.useMemoizedResult(r.inputStream.pos,o);delete s.memo[i]}return n.reallyEval(r)};f.prototype.handleCycle=function(r){let e=r.getCurrentPosInfo(),{currentLeftRecursion:t}=e,n=this.toMemoKey(),s=e.memo[n];return t&&t.headApplication.toMemoKey()===n?s.updateInvolvedApplicationMemoKeys():s||(s=e.memoize(n,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),e.startLeftRecursion(this,s)),r.useMemoizedResult(r.inputStream.pos,s)};f.prototype.reallyEval=function(r){let{inputStream:e}=r,t=e.pos,n=r.getCurrentPosInfo(),s=r.grammar.rules[this.ruleName],{body:i}=s,{description:o}=s;r.enterApplication(n,this),o&&r.pushFailuresInfo();let l=e.examinedLength;e.examinedLength=0;let a=this.evalOnce(i,r),p=n.currentLeftRecursion,u=this.toMemoKey(),c=p&&p.headApplication.toMemoKey()===u,h;r.doNotMemoize?r.doNotMemoize=!1:c?(a=this.growSeedResult(i,r,t,p,a),n.endLeftRecursion(),h=p,h.examinedLength=e.examinedLength-t,h.rightmostFailureOffset=r._getRightmostFailureOffset(),n.memoize(u,h)):(!p||!p.isInvolved(u))&&(h=n.memoize(u,{matchLength:e.pos-t,examinedLength:e.examinedLength-t,value:a,failuresAtRightmostPosition:r.cloneRecordedFailures(),rightmostFailureOffset:r._getRightmostFailureOffset()}));let m=!!a;if(o&&(r.popFailuresInfo(),m||r.processFailure(t,this),h&&(h.failuresAtRightmostPosition=r.cloneRecordedFailures())),r.isTracing()&&h){let g=r.getTraceEntry(t,this,m,m?[a]:[]);c&&($(g.terminatingLREntry!=null||!m),g.isHeadOfLeftRecursion=!0),h.traceEntry=g}return e.examinedLength=Math.max(e.examinedLength,l),r.exitApplication(n,a),m};f.prototype.evalOnce=function(r,e){let{inputStream:t}=e,n=t.pos;if(e.eval(r)){let s=r.getArity(),i=e._bindings.splice(e._bindings.length-s,s),o=e._bindingOffsets.splice(e._bindingOffsets.length-s,s),l=t.pos-n;return new $e(this.ruleName,i,o,l)}else return!1};f.prototype.growSeedResult=function(r,e,t,n,s){if(!s)return!1;let{inputStream:i}=e;for(;;){if(n.matchLength=i.pos-t,n.value=s,n.failuresAtRightmostPosition=e.cloneRecordedFailures(),e.isTracing()){let o=e.trace[e.trace.length-1];n.traceEntry=new W(e.input,t,i.pos,this,!0,[s],[o.clone()])}if(i.pos=t,s=this.evalOnce(r,e),i.pos-t<=n.matchLength)break;e.isTracing()&&e.trace.splice(-2,1)}return e.isTracing()&&n.traceEntry.recordLRTermination(e.trace.pop(),s),i.pos=t+n.matchLength,n.value};x.prototype.eval=function(r){let{inputStream:e}=r,t=e.pos,n=e.next();return n&&this.pattern.test(n)?(r.pushBinding(new U(n.length),t),!0):(r.processFailure(t,this),!1)};d.prototype.getArity=M(\"getArity\");F.getArity=T.getArity=E.prototype.getArity=A.prototype.getArity=_.prototype.getArity=f.prototype.getArity=x.prototype.getArity=function(){return 1};v.prototype.getArity=function(){return this.terms.length===0?0:this.terms[0].getArity()};y.prototype.getArity=function(){let r=0;for(let e=0;e<this.factors.length;e++)r+=this.factors[e].getArity();return r};P.prototype.getArity=function(){return this.expr.getArity()};N.prototype.getArity=function(){return 0};O.prototype.getArity=L.prototype.getArity=function(){return this.expr.getArity()};function B(r,e){let t={};if(r.source&&e){let n=r.source.relativeTo(e);t.sourceInterval=[n.startIdx,n.endIdx]}return t}d.prototype.outputRecipe=M(\"outputRecipe\");F.outputRecipe=function(r,e){return[\"any\",B(this,e)]};T.outputRecipe=function(r,e){return[\"end\",B(this,e)]};E.prototype.outputRecipe=function(r,e){return[\"terminal\",B(this,e),this.obj]};A.prototype.outputRecipe=function(r,e){return[\"range\",B(this,e),this.from,this.to]};_.prototype.outputRecipe=function(r,e){return[\"param\",B(this,e),this.index]};v.prototype.outputRecipe=function(r,e){return[\"alt\",B(this,e)].concat(this.terms.map(t=>t.outputRecipe(r,e)))};J.prototype.outputRecipe=function(r,e){return this.terms[0].outputRecipe(r,e)};Z.prototype.outputRecipe=function(r,e){let t=this.terms.slice(0,this.expansionPos),n=this.terms.slice(this.expansionPos+1);return[\"splice\",B(this,e),t.map(s=>s.outputRecipe(r,e)),n.map(s=>s.outputRecipe(r,e))]};y.prototype.outputRecipe=function(r,e){return[\"seq\",B(this,e)].concat(this.factors.map(t=>t.outputRecipe(r,e)))};V.prototype.outputRecipe=G.prototype.outputRecipe=k.prototype.outputRecipe=N.prototype.outputRecipe=O.prototype.outputRecipe=L.prototype.outputRecipe=function(r,e){return[this.constructor.name.toLowerCase(),B(this,e),this.expr.outputRecipe(r,e)]};f.prototype.outputRecipe=function(r,e){return[\"app\",B(this,e),this.ruleName,this.args.map(t=>t.outputRecipe(r,e))]};x.prototype.outputRecipe=function(r,e){return[\"unicodeChar\",B(this,e),this.category]};d.prototype.introduceParams=M(\"introduceParams\");F.introduceParams=T.introduceParams=E.prototype.introduceParams=A.prototype.introduceParams=_.prototype.introduceParams=x.prototype.introduceParams=function(r){return this};v.prototype.introduceParams=function(r){return this.terms.forEach((e,t,n)=>{n[t]=e.introduceParams(r)}),this};y.prototype.introduceParams=function(r){return this.factors.forEach((e,t,n)=>{n[t]=e.introduceParams(r)}),this};P.prototype.introduceParams=N.prototype.introduceParams=O.prototype.introduceParams=L.prototype.introduceParams=function(r){return this.expr=this.expr.introduceParams(r),this};f.prototype.introduceParams=function(r){let e=r.indexOf(this.ruleName);if(e>=0){if(this.args.length>0)throw new Error(\"Parameterized rules cannot be passed as arguments to another rule.\");return new _(e).withSource(this.source)}else return this.args.forEach((t,n,s)=>{s[n]=t.introduceParams(r)}),this};d.prototype.isNullable=function(r){return this._isNullable(r,Object.create(null))};d.prototype._isNullable=M(\"_isNullable\");F._isNullable=A.prototype._isNullable=_.prototype._isNullable=G.prototype._isNullable=x.prototype._isNullable=function(r,e){return!1};T._isNullable=function(r,e){return!0};E.prototype._isNullable=function(r,e){return typeof this.obj==\"string\"?this.obj===\"\":!1};v.prototype._isNullable=function(r,e){return this.terms.length===0||this.terms.some(t=>t._isNullable(r,e))};y.prototype._isNullable=function(r,e){return this.factors.every(t=>t._isNullable(r,e))};V.prototype._isNullable=k.prototype._isNullable=N.prototype._isNullable=O.prototype._isNullable=function(r,e){return!0};L.prototype._isNullable=function(r,e){return this.expr._isNullable(r,e)};f.prototype._isNullable=function(r,e){let t=this.toMemoKey();if(!Object.prototype.hasOwnProperty.call(e,t)){let{body:n}=r.rules[this.ruleName],s=n.substituteParams(this.args);e[t]=!1,e[t]=s._isNullable(r,e)}return e[t]};d.prototype.substituteParams=M(\"substituteParams\");F.substituteParams=T.substituteParams=E.prototype.substituteParams=A.prototype.substituteParams=x.prototype.substituteParams=function(r){return this};_.prototype.substituteParams=function(r){return r[this.index]};v.prototype.substituteParams=function(r){return new v(this.terms.map(e=>e.substituteParams(r)))};y.prototype.substituteParams=function(r){return new y(this.factors.map(e=>e.substituteParams(r)))};P.prototype.substituteParams=N.prototype.substituteParams=O.prototype.substituteParams=L.prototype.substituteParams=function(r){return new this.constructor(this.expr.substituteParams(r))};f.prototype.substituteParams=function(r){if(this.args.length===0)return this;{let e=this.args.map(t=>t.substituteParams(r));return new f(this.ruleName,e)}};function gt(r){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(r)}function et(r){let e=Object.create(null);r.forEach(t=>{e[t]=(e[t]||0)+1}),Object.keys(e).forEach(t=>{if(e[t]<=1)return;let n=1;r.forEach((s,i)=>{s===t&&(r[i]=s+\"_\"+n++)})})}d.prototype.toArgumentNameList=M(\"toArgumentNameList\");F.toArgumentNameList=function(r,e){return[\"any\"]};T.toArgumentNameList=function(r,e){return[\"end\"]};E.prototype.toArgumentNameList=function(r,e){return typeof this.obj==\"string\"&&/^[_a-zA-Z0-9]+$/.test(this.obj)?[\"_\"+this.obj]:[\"$\"+r]};A.prototype.toArgumentNameList=function(r,e){let t=this.from+\"_to_\"+this.to;return gt(t)||(t=\"_\"+t),gt(t)||(t=\"$\"+r),[t]};v.prototype.toArgumentNameList=function(r,e){let t=this.terms.map(i=>i.toArgumentNameList(r,!0)),n=[],s=t[0].length;for(let i=0;i<s;i++){let o=[];for(let a=0;a<this.terms.length;a++)o.push(t[a][i]);let l=_t(o);n.push(l.join(\"_or_\"))}return e||et(n),n};y.prototype.toArgumentNameList=function(r,e){let t=[];return this.factors.forEach(n=>{let s=n.toArgumentNameList(r,!0);t=t.concat(s),r+=s.length}),e||et(t),t};P.prototype.toArgumentNameList=function(r,e){let t=this.expr.toArgumentNameList(r,e).map(n=>n[n.length-1]===\"s\"?n+\"es\":n+\"s\");return e||et(t),t};k.prototype.toArgumentNameList=function(r,e){return this.expr.toArgumentNameList(r,e).map(t=>\"opt\"+t[0].toUpperCase()+t.slice(1))};N.prototype.toArgumentNameList=function(r,e){return[]};O.prototype.toArgumentNameList=L.prototype.toArgumentNameList=function(r,e){return this.expr.toArgumentNameList(r,e)};f.prototype.toArgumentNameList=function(r,e){return[this.ruleName]};x.prototype.toArgumentNameList=function(r,e){return[\"$\"+r]};_.prototype.toArgumentNameList=function(r,e){return[\"param\"+this.index]};d.prototype.toDisplayString=M(\"toDisplayString\");v.prototype.toDisplayString=y.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:\"[\"+this.constructor.name+\"]\"};F.toDisplayString=T.toDisplayString=P.prototype.toDisplayString=N.prototype.toDisplayString=O.prototype.toDisplayString=L.prototype.toDisplayString=E.prototype.toDisplayString=A.prototype.toDisplayString=_.prototype.toDisplayString=function(){return this.toString()};f.prototype.toDisplayString=function(){if(this.args.length>0){let r=this.args.map(e=>e.toDisplayString());return this.ruleName+\"<\"+r.join(\",\")+\">\"}else return this.ruleName};x.prototype.toDisplayString=function(){return\"Unicode [\"+this.category+\"] character\"};function tn(r){return r===\"description\"||r===\"string\"||r===\"code\"}var R=class{constructor(e,t,n){if(!tn(n))throw new Error(\"invalid Failure type: \"+n);this.pexpr=e,this.text=t,this.type=n,this.fluffy=!1}getPExpr(){return this.pexpr}getText(){return this.text}getType(){return this.type}isDescription(){return this.type===\"description\"}isStringTerminal(){return this.type===\"string\"}isCode(){return this.type===\"code\"}isFluffy(){return this.fluffy}makeFluffy(){this.fluffy=!0}clearFluffy(){this.fluffy=!1}subsumes(e){return this.getText()===e.getText()&&this.type===e.type&&(!this.isFluffy()||this.isFluffy()&&e.isFluffy())}toString(){return this.type===\"string\"?JSON.stringify(this.getText()):this.getText()}clone(){let e=new R(this.pexpr,this.text,this.type);return this.isFluffy()&&e.makeFluffy(),e}toKey(){return this.toString()+\"#\"+this.type}};d.prototype.toFailure=M(\"toFailure\");F.toFailure=function(r){return new R(this,\"any object\",\"description\")};T.toFailure=function(r){return new R(this,\"end of input\",\"description\")};E.prototype.toFailure=function(r){return new R(this,this.obj,\"string\")};A.prototype.toFailure=function(r){return new R(this,JSON.stringify(this.from)+\"..\"+JSON.stringify(this.to),\"code\")};N.prototype.toFailure=function(r){let e=this.expr===F?\"nothing\":\"not \"+this.expr.toFailure(r);return new R(this,e,\"description\")};O.prototype.toFailure=function(r){return this.expr.toFailure(r)};f.prototype.toFailure=function(r){let{description:e}=r.rules[this.ruleName];return e||(e=(/^[aeiouAEIOU]/.test(this.ruleName)?\"an\":\"a\")+\" \"+this.ruleName),new R(this,e,\"description\")};x.prototype.toFailure=function(r){return new R(this,\"a Unicode [\"+this.category+\"] character\",\"description\")};v.prototype.toFailure=function(r){let t=\"(\"+this.terms.map(n=>n.toFailure(r)).join(\" or \")+\")\";return new R(this,t,\"description\")};y.prototype.toFailure=function(r){let t=\"(\"+this.factors.map(n=>n.toFailure(r)).join(\" \")+\")\";return new R(this,t,\"description\")};P.prototype.toFailure=function(r){let e=\"(\"+this.expr.toFailure(r)+this.operator+\")\";return new R(this,e,\"description\")};d.prototype.toString=M(\"toString\");F.toString=function(){return\"any\"};T.toString=function(){return\"end\"};E.prototype.toString=function(){return JSON.stringify(this.obj)};A.prototype.toString=function(){return JSON.stringify(this.from)+\"..\"+JSON.stringify(this.to)};_.prototype.toString=function(){return\"$\"+this.index};L.prototype.toString=function(){return\"#(\"+this.expr.toString()+\")\"};v.prototype.toString=function(){return this.terms.length===1?this.terms[0].toString():\"(\"+this.terms.map(r=>r.toString()).join(\" | \")+\")\"};y.prototype.toString=function(){return this.factors.length===1?this.factors[0].toString():\"(\"+this.factors.map(r=>r.toString()).join(\" \")+\")\"};P.prototype.toString=function(){return this.expr+this.operator};N.prototype.toString=function(){return\"~\"+this.expr};O.prototype.toString=function(){return\"&\"+this.expr};f.prototype.toString=function(){if(this.args.length>0){let r=this.args.map(e=>e.toString());return this.ruleName+\"<\"+r.join(\",\")+\">\"}else return this.ruleName};x.prototype.toString=function(){return\"\\\\p{\"+this.category+\"}\"};var re=class extends d{constructor(e){super(),this.obj=e}_getString(e){let t=e.currentApplication().args[this.obj.index];return $(t instanceof E,\"expected a Terminal expression\"),t.obj}allowsSkippingPrecedingSpace(){return!0}eval(e){let{inputStream:t}=e,n=t.pos,s=this._getString(e);return t.matchString(s,!0)?(e.pushBinding(new U(s.length),n),!0):(e.processFailure(n,this),!1)}getArity(){return 1}substituteParams(e){return new re(this.obj.substituteParams(e))}toDisplayString(){return this.obj.toDisplayString()+\" (case-insensitive)\"}toFailure(e){return new R(this,this.obj.toFailure(e)+\" (case-insensitive)\",\"description\")}_isNullable(e,t){return this.obj._isNullable(e,t)}},rn=Object.freeze({__proto__:null,CaseInsensitiveTerminal:re,PExpr:d,any:F,end:T,Terminal:E,Range:A,Param:_,Alt:v,Extend:J,Splice:Z,Seq:y,Iter:P,Star:V,Plus:G,Opt:k,Not:N,Lookahead:O,Lex:L,Apply:f,UnicodeChar:x}),qt;Ft(r=>{qt=r.rules.applySyntactic.body});var ke=new f(\"spaces\"),Ke=class{constructor(e,t,n){this.matcher=e,this.startExpr=t,this.grammar=e.grammar,this.input=e.getInput(),this.inputStream=new te(this.input),this.memoTable=e._memoTable,this.userData=void 0,this.doNotMemoize=!1,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],n!==void 0&&(this.positionToRecordFailures=n,this.recordedFailures=Object.create(null))}posToOffset(e){return e-this._posStack[this._posStack.length-1]}enterApplication(e,t){this._posStack.push(this.inputStream.pos),this._applicationStack.push(t),this.inLexifiedContextStack.push(!1),e.enter(t),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1}exitApplication(e,t){let n=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),e.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),t&&this.pushBinding(t,n)}enterLexifiedContext(){this.inLexifiedContextStack.push(!0)}exitLexifiedContext(){this.inLexifiedContextStack.pop()}currentApplication(){return this._applicationStack[this._applicationStack.length-1]}inSyntacticContext(){let e=this.currentApplication();return e?e.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()}inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]}skipSpaces(){return this.pushFailuresInfo(),this.eval(ke),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos}skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos}maybeSkipSpacesBefore(e){return e.allowsSkippingPrecedingSpace()&&e!==ke?this.skipSpacesIfInSyntacticContext():this.inputStream.pos}pushBinding(e,t){this._bindings.push(e),this._bindingOffsets.push(this.posToOffset(t))}popBinding(){this._bindings.pop(),this._bindingOffsets.pop()}numBindings(){return this._bindings.length}truncateBindings(e){for(;this._bindings.length>e;)this.popBinding()}getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)}getPosInfo(e){let t=this.memoTable[e];return t||(t=this.memoTable[e]=new Ue),t}processFailure(e,t){if(this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,e),this.recordedFailures&&e===this.positionToRecordFailures){let n=this.currentApplication();n&&(t=t.substituteParams(n.args)),this.recordFailure(t.toFailure(this.grammar),!1)}}recordFailure(e,t){let n=e.toKey();this.recordedFailures[n]?this.recordedFailures[n].isFluffy()&&!e.isFluffy()&&this.recordedFailures[n].clearFluffy():this.recordedFailures[n]=t?e.clone():e}recordFailures(e,t){Object.keys(e).forEach(n=>{this.recordFailure(e[n],t)})}cloneRecordedFailures(){if(!this.recordedFailures)return;let e=Object.create(null);return Object.keys(this.recordedFailures).forEach(t=>{e[t]=this.recordedFailures[t].clone()}),e}getRightmostFailurePosition(){return this.rightmostFailurePosition}_getRightmostFailureOffset(){return this.rightmostFailurePosition>=0?this.posToOffset(this.rightmostFailurePosition):-1}getMemoizedTraceEntry(e,t){let n=this.memoTable[e];if(n&&t instanceof f){let s=n.memo[t.toMemoKey()];if(s&&s.traceEntry){let i=s.traceEntry.cloneWithExpr(t);return i.isMemoized=!0,i}}return null}getTraceEntry(e,t,n,s){if(t instanceof f){let i=this.currentApplication(),o=i?i.args:[];t=t.substituteParams(o)}return this.getMemoizedTraceEntry(e,t)||new W(this.input,e,this.inputStream.pos,t,n,s,this.trace)}isTracing(){return!!this.trace}hasNecessaryInfo(e){return this.trace&&!e.traceEntry?!1:this.recordedFailures&&this.inputStream.pos+e.rightmostFailureOffset===this.positionToRecordFailures?!!e.failuresAtRightmostPosition:!0}useMemoizedResult(e,t){this.trace&&this.trace.push(t.traceEntry);let n=this.inputStream.pos+t.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,n),this.recordedFailures&&this.positionToRecordFailures===n&&t.failuresAtRightmostPosition&&this.recordFailures(t.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,t.examinedLength+e),t.value?(this.inputStream.pos+=t.matchLength,this.pushBinding(t.value,e),!0):!1}eval(e){let{inputStream:t}=this,n=this._bindings.length,s=this.userData,i;this.recordedFailures&&(i=this.recordedFailures,this.recordedFailures=Object.create(null));let o=t.pos,l=this.maybeSkipSpacesBefore(e),a;this.trace&&(a=this.trace,this.trace=[]);let p=e.eval(this);if(this.trace){let u=this._bindings.slice(n),c=this.getTraceEntry(l,e,p,u);c.isImplicitSpaces=e===ke,c.isRootNode=e===this.startExpr,a.push(c),this.trace=a}return p?this.recordedFailures&&t.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach(u=>{this.recordedFailures[u].makeFluffy()}):(t.pos=o,this.truncateBindings(n),this.userData=s),this.recordedFailures&&this.recordFailures(i,!1),e===qt&&this.skipSpaces(),p}getMatchResult(){this.grammar._setUpMatchState(this),this.eval(this.startExpr);let e;this.recordedFailures&&(e=Object.keys(this.recordedFailures).map(n=>this.recordedFailures[n]));let t=this._bindings[0];return t&&(t.grammar=this.grammar),new fe(this.matcher,this.input,this.startExpr,t,this._bindingOffsets[0],this.rightmostFailurePosition,e)}getTrace(){this.trace=[];let e=this.getMatchResult(),t=this.trace[this.trace.length-1];return t.result=e,t}pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)}popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}},ze=class{constructor(e){this.grammar=e,this._memoTable=[],this._input=\"\",this._isMemoTableStale=!1}_resetMemoTable(){this._memoTable=[],this._isMemoTableStale=!1}getInput(){return this._input}setInput(e){return this._input!==e&&this.replaceInputRange(0,this._input.length,e),this}replaceInputRange(e,t,n){let s=this._input,i=this._memoTable;if(e<0||e>s.length||t<0||t>s.length||e>t)throw new Error(\"Invalid indices: \"+e+\" and \"+t);this._input=s.slice(0,e)+n+s.slice(t),this._input!==s&&i.length>0&&(this._isMemoTableStale=!0);let o=i.slice(t);i.length=e;for(let l=0;l<n.length;l++)i.push(void 0);for(let l of o)i.push(l);for(let l=0;l<e;l++){let a=i[l];a&&a.clearObsoleteEntries(l,e)}return this}match(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!1})}trace(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!0})}_match(e,t={}){let n={tracing:!1,incremental:!0,positionToRecordFailures:void 0,...t};if(!n.incremental)this._resetMemoTable();else if(this._isMemoTableStale&&!this.grammar.supportsIncrementalParsing)throw Or(this.grammar);let s=new Ke(this,e,n.positionToRecordFailures);return n.tracing?s.getTrace():s.getMatchResult()}_getStartExpr(e){let t=e||this.grammar.defaultStartRule;if(!t)throw new Error(\"Missing start rule argument -- the grammar has no default start rule.\");let n=this.grammar.parseApplication(t);return new y([n,T])}},ue=[],Qe=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),Ie=class{constructor(e,t,n){this._node=e,this.source=t,this._baseInterval=n,e.isNonterminal()&&$(t===n),this._childWrappers=[]}_forgetMemoizedResultFor(e){delete this._node[this._semantics.attributeKeys[e]],this.children.forEach(t=>{t._forgetMemoizedResultFor(e)})}child(e){if(!(0<=e&&e<this._node.numChildren()))return;let t=this._childWrappers[e];if(!t){let n=this._node.childAt(e),s=this._node.childOffsets[e],i=this._baseInterval.subInterval(s,n.matchLength),o=n.isNonterminal()?i:this._baseInterval;t=this._childWrappers[e]=this._semantics.wrap(n,i,o)}return t}_children(){for(let e=0;e<this._node.numChildren();e++)this.child(e);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(e){let t=e||[],n=t.map(o=>o._node),s=new ve(n,[],-1,!1),i=this._semantics.wrap(s,null,null);return i._childWrappers=t,i}get children(){return this._children()}get ctorName(){return this._node.ctorName}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}},q=class{constructor(e,t){let n=this;if(this.grammar=e,this.checkedActionDicts=!1,this.Wrapper=class extends(t?t.Wrapper:Ie){constructor(s,i,o){super(s,i,o),n.checkActionDictsIfHaventAlready(),this._semantics=n}toString(){return\"[semantics wrapper for \"+n.grammar.name+\"]\"}},this.super=t,t){if(!(e.equals(this.super.grammar)||e._inheritsFrom(this.super.grammar)))throw new Error(\"Cannot extend a semantics for grammar '\"+this.super.grammar.name+\"' for use with grammar '\"+e.name+\"' (not a sub-grammar)\");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(let s in this.attributes)Object.defineProperty(this.attributeKeys,s,{value:ft(s)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}toString(){return\"[semantics for \"+this.grammar.name+\"]\"}checkActionDictsIfHaventAlready(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)}checkActionDicts(){let e;for(e in this.operations)this.operations[e].checkActionDict(this.grammar);for(e in this.attributes)this.attributes[e].checkActionDict(this.grammar)}toRecipe(e){function t(s){return s.super!==q.BuiltInSemantics._getSemantics()}let n=`(function(g) {\n`;if(t(this)){n+=\"  var semantics = \"+this.super.toRecipe(!0)+\"(g\";let s=this.super.grammar,i=this.grammar;for(;i!==s;)n+=\".superGrammar\",i=i.superGrammar;n+=`);\n`,n+=\"  return g.extendSemantics(semantics)\"}else n+=\"  return g.createSemantics()\";return[\"Operation\",\"Attribute\"].forEach(s=>{let i=this[s.toLowerCase()+\"s\"];Object.keys(i).forEach(o=>{let{actionDict:l,formals:a,builtInDefault:p}=i[o],u=o;a.length>0&&(u+=\"(\"+a.join(\", \")+\")\");let c;t(this)&&this.super[s.toLowerCase()+\"s\"][o]?c=\"extend\"+s:c=\"add\"+s,n+=`\n    .`+c+\"(\"+JSON.stringify(u)+\", {\";let h=[];Object.keys(l).forEach(m=>{if(l[m]!==p){let g=l[m].toString().trim();g=g.replace(/^.*\\(/,\"function(\"),h.push(`\n      `+JSON.stringify(m)+\": \"+g)}}),n+=h.join(\",\")+`\n    })`})}),n+=`;\n  })`,e||(n=`(function() {\n  var grammar = this.fromRecipe(`+this.grammar.toRecipe()+`);\n  var semantics = `+n+`(grammar);\n  return semantics;\n});\n`),n}addOperationOrAttribute(e,t,n){let s=e+\"s\",i=vt(t,e),{name:o}=i,{formals:l}=i;this.assertNewName(o,e);let a=nn(e,o,c),p={_default:a};Object.keys(n).forEach(h=>{p[h]=n[h]});let u=e===\"operation\"?new Y(o,l,p,a):new pe(o,p,a);u.checkActionDict(this.grammar),this[s][o]=u;function c(...h){let m=this._semantics[s][o];if(arguments.length!==m.formals.length)throw new Error(\"Invalid number of arguments passed to \"+o+\" \"+e+\" (expected \"+m.formals.length+\", got \"+arguments.length+\")\");let g=Object.create(null);for(let[z,ae]of Object.entries(h)){let mr=m.formals[z];g[mr]=ae}let S=this.args;this.args=g;let w=m.execute(this._semantics,this);return this.args=S,w}e===\"operation\"?(this.Wrapper.prototype[o]=c,this.Wrapper.prototype[o].toString=function(){return\"[\"+o+\" operation]\"}):(Object.defineProperty(this.Wrapper.prototype,o,{get:c,configurable:!0}),Object.defineProperty(this.attributeKeys,o,{value:ft(o)}))}extendOperationOrAttribute(e,t,n){let s=e+\"s\";if(vt(t,\"attribute\"),!(this.super&&t in this.super[s]))throw new Error(\"Cannot extend \"+e+\" '\"+t+\"': did not inherit an \"+e+\" with that name\");if(Qe(this[s],t))throw new Error(\"Cannot extend \"+e+\" '\"+t+\"' again\");let i=this[s][t].formals,o=this[s][t].actionDict,l=Object.create(o);Object.keys(n).forEach(a=>{l[a]=n[a]}),this[s][t]=e===\"operation\"?new Y(t,i,l):new pe(t,l),this[s][t].checkActionDict(this.grammar)}assertNewName(e,t){if(Qe(Ie.prototype,e))throw new Error(\"Cannot add \"+t+\" '\"+e+\"': that's a reserved name\");if(e in this.operations)throw new Error(\"Cannot add \"+t+\" '\"+e+\"': an operation with that name already exists\");if(e in this.attributes)throw new Error(\"Cannot add \"+t+\" '\"+e+\"': an attribute with that name already exists\")}wrap(e,t,n){let s=n||t;return e instanceof this.Wrapper?e:new this.Wrapper(e,t,s)}};function vt(r,e){if(!q.prototypeGrammar)return $(r.indexOf(\"(\")===-1),{name:r,formals:[]};let t=q.prototypeGrammar.match(r,e===\"operation\"?\"OperationSignature\":\"AttributeSignature\");if(t.failed())throw new Error(t.message);return q.prototypeGrammarSemantics(t).parse()}function nn(r,e,t){return function(...n){let i=(this._semantics.operations[e]||this._semantics.attributes[e]).formals.map(o=>this.args[o]);if(!this.isIteration()&&n.length===1)return t.apply(n[0],i);throw Wr(this.ctorName,e,r,ue)}}q.createSemantics=function(r,e){let t=new q(r,e!==void 0?e:q.BuiltInSemantics._getSemantics()),n=function(i){if(!(i instanceof fe))throw new TypeError(\"Semantics expected a MatchResult, but got \"+Ze(i));if(i.failed())throw new TypeError(\"cannot apply Semantics to \"+i.toString());let o=i._cst;if(o.grammar!==r)throw new Error(\"Cannot use a MatchResult from grammar '\"+o.grammar.name+\"' with a semantics for '\"+r.name+\"'\");let l=new te(i.input);return t.wrap(o,l.interval(i._cstOffset,i.input.length))};return n.addOperation=function(s,i){return t.addOperationOrAttribute(\"operation\",s,i),n},n.extendOperation=function(s,i){return t.extendOperationOrAttribute(\"operation\",s,i),n},n.addAttribute=function(s,i){return t.addOperationOrAttribute(\"attribute\",s,i),n},n.extendAttribute=function(s,i){return t.extendOperationOrAttribute(\"attribute\",s,i),n},n._getActionDict=function(s){let i=t.operations[s]||t.attributes[s];if(!i)throw new Error('\"'+s+'\" is not a valid operation or attribute name in this semantics for \"'+r.name+'\"');return i.actionDict},n._remove=function(s){let i;return s in t.operations?(i=t.operations[s],delete t.operations[s]):s in t.attributes&&(i=t.attributes[s],delete t.attributes[s]),delete t.Wrapper.prototype[s],i},n.getOperationNames=function(){return Object.keys(t.operations)},n.getAttributeNames=function(){return Object.keys(t.attributes)},n.getGrammar=function(){return t.grammar},n.toRecipe=function(s){return t.toRecipe(s)},n.toString=t.toString.bind(t),n._getSemantics=function(){return t},n};var Y=class{constructor(e,t,n,s){this.name=e,this.formals=t,this.actionDict=n,this.builtInDefault=s}checkActionDict(e){e._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(e,t){try{let{ctorName:n}=t._node,s=this.actionDict[n];return s?(ue.push([this,n]),s.apply(t,t._children())):t.isNonterminal()&&(s=this.actionDict._nonterminal,s)?(ue.push([this,\"_nonterminal\",n]),s.apply(t,t._children())):(ue.push([this,\"default action\",n]),this.actionDict._default.apply(t,t._children()))}finally{ue.pop()}}};Y.prototype.typeName=\"operation\";var pe=class extends Y{constructor(e,t,n){super(e,[],t,n)}execute(e,t){let n=t._node,s=e.attributeKeys[this.name];return Qe(n,s)||(n[s]=Y.prototype.execute.call(this,e,t)),n[s]}};pe.prototype.typeName=\"attribute\";var It=[\"_iter\",\"_terminal\",\"_nonterminal\",\"_default\"];function yt(r){return Object.keys(r.rules).sort().map(e=>r.rules[e])}var sn=r=>r.replace(/\\u2028/g,\"\\\\u2028\").replace(/\\u2029/g,\"\\\\u2029\"),Rt,Mt,C=class{constructor(e,t,n,s){if(this.name=e,this.superGrammar=t,this.rules=n,s){if(!(s in n))throw new Error(\"Invalid start rule: '\"+s+\"' is not a rule in grammar '\"+e+\"'\");this.defaultStartRule=s}this._matchStateInitializer=void 0,this.supportsIncrementalParsing=!0}matcher(){return new ze(this)}isBuiltIn(){return this===C.ProtoBuiltInRules||this===C.BuiltInRules}equals(e){if(this===e)return!0;if(e==null||this.name!==e.name||this.defaultStartRule!==e.defaultStartRule||!(this.superGrammar===e.superGrammar||this.superGrammar.equals(e.superGrammar)))return!1;let t=yt(this),n=yt(e);return t.length===n.length&&t.every((s,i)=>s.description===n[i].description&&s.formals.join(\",\")===n[i].formals.join(\",\")&&s.body.toString()===n[i].body.toString())}match(e,t){let n=this.matcher();return n.replaceInputRange(0,0,e),n.match(t)}trace(e,t){let n=this.matcher();return n.replaceInputRange(0,0,e),n.trace(t)}createSemantics(){return q.createSemantics(this)}extendSemantics(e){return q.createSemantics(this,e._getSemantics())}_checkTopDownActionDict(e,t,n){let s=[];for(let i in n){let o=n[i];if(!It.includes(i)&&!(i in this.rules)){s.push(`'${i}' is not a valid semantic action for '${this.name}'`);continue}if(typeof o!=\"function\"){s.push(`'${i}' must be a function in an action dictionary for '${this.name}'`);continue}let a=o.length,p=this._topDownActionArity(i);if(a!==p){let u;i===\"_iter\"||i===\"_nonterminal\"?u=`it should use a rest parameter, e.g. \\`${i}(...children) {}\\`. NOTE: this is new in Ohm v16 \\u2014 see https://ohmjs.org/d/ati for details.`:u=`expected ${p}, got ${a}`,s.push(`Semantic action '${i}' has the wrong arity: ${u}`)}}if(s.length>0){let i=s.map(l=>\"- \"+l),o=new Error([`Found errors in the action dictionary of the '${t}' ${e}:`,...i].join(`\n`));throw o.problems=s,o}}_topDownActionArity(e){return It.includes(e)?0:this.rules[e].body.getArity()}_inheritsFrom(e){let t=this.superGrammar;for(;t;){if(t.equals(e,!0))return!0;t=t.superGrammar}return!1}toRecipe(e=void 0){let t={};this.source&&(t.source=this.source.contents);let n=null;this.defaultStartRule&&(n=this.defaultStartRule);let s={};Object.keys(this.rules).forEach(l=>{let a=this.rules[l],{body:p}=a,u=!this.superGrammar||!this.superGrammar.rules[l],c;u?c=\"define\":c=p instanceof J?\"extend\":\"override\";let h={};if(a.source&&this.source){let S=a.source.relativeTo(this.source);h.sourceInterval=[S.startIdx,S.endIdx]}let m=u?a.description:null,g=p.outputRecipe(a.formals,this.source);s[l]=[c,h,m,a.formals,g]});let i=\"null\";e?i=e:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(i=this.superGrammar.toRecipe());let o=[...[\"grammar\",t,this.name].map(JSON.stringify),i,...[n,s].map(JSON.stringify)];return sn(`[${o.join(\",\")}]`)}toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}_toOperationOrAttributeActionDictionaryTemplate(){let e=new X;e.append(\"{\");let t=!0;for(let n in this.rules){let{body:s}=this.rules[n];t?t=!1:e.append(\",\"),e.append(`\n`),e.append(\"  \"),this.addSemanticActionTemplate(n,s,e)}return e.append(`\n}`),e.contents()}addSemanticActionTemplate(e,t,n){n.append(e),n.append(\": function(\");let s=this._topDownActionArity(e);n.append(Ee(\"_\",s).join(\", \")),n.append(`) {\n`),n.append(\"  }\")}parseApplication(e){let t;if(e.indexOf(\"<\")===-1)t=new f(e);else{let s=Rt.match(e,\"Base_application\");t=Mt(s,{})}if(!(t.ruleName in this.rules))throw Ot(t.ruleName,this.name);let{formals:n}=this.rules[t.ruleName];if(n.length!==t.args.length){let{source:s}=this.rules[t.ruleName];throw wt(t.ruleName,n.length,t.args.length,s)}return t}_setUpMatchState(e){this._matchStateInitializer&&this._matchStateInitializer(e)}};C.ProtoBuiltInRules=new C(\"ProtoBuiltInRules\",void 0,{any:{body:F,formals:[],description:\"any character\",primitive:!0},end:{body:T,formals:[],description:\"end of input\",primitive:!0},caseInsensitive:{body:new re(new _(0)),formals:[\"str\"],primitive:!0},lower:{body:new x(\"Ll\"),formals:[],description:\"a lowercase letter\",primitive:!0},upper:{body:new x(\"Lu\"),formals:[],description:\"an uppercase letter\",primitive:!0},unicodeLtmo:{body:new x(\"Ltmo\"),formals:[],description:\"a Unicode character in Lt, Lm, or Lo\",primitive:!0},spaces:{body:new V(new f(\"space\")),formals:[]},space:{body:new A(\"\\0\",\" \"),formals:[],description:\"a space\"}});C.initApplicationParser=function(r,e){Rt=r,Mt=e};var ye=class{constructor(e){this.name=e}sourceInterval(e,t){return this.source.subInterval(e,t-e)}ensureSuperGrammar(){return this.superGrammar||this.withSuperGrammar(this.name===\"BuiltInRules\"?C.ProtoBuiltInRules:C.BuiltInRules),this.superGrammar}ensureSuperGrammarRuleForOverriding(e,t){let n=this.ensureSuperGrammar().rules[e];if(!n)throw wr(e,this.superGrammar.name,t);return n}installOverriddenOrExtendedRule(e,t,n,s){let i=Ve(t);if(i.length>0)throw ht(e,i,s);let o=this.ensureSuperGrammar().rules[e],l=o.formals,a=l?l.length:0;if(t.length!==a)throw wt(e,a,t.length,s);return this.install(e,t,n,o.description,s)}install(e,t,n,s,i,o=!1){return this.rules[e]={body:n.introduceParams(t),formals:t,description:s,source:i,primitive:o},this}withSuperGrammar(e){if(this.superGrammar)throw new Error(\"the super grammar of a GrammarDecl cannot be set more than once\");return this.superGrammar=e,this.rules=Object.create(e.rules),e.isBuiltIn()||(this.defaultStartRule=e.defaultStartRule),this}withDefaultStartRule(e){return this.defaultStartRule=e,this}withSource(e){return this.source=new te(e).interval(0,e.length),this}build(){let e=new C(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule);e._matchStateInitializer=e.superGrammar._matchStateInitializer,e.supportsIncrementalParsing=e.superGrammar.supportsIncrementalParsing;let t=[],n=!1;return Object.keys(e.rules).forEach(s=>{let{body:i}=e.rules[s];try{i.assertChoicesHaveUniformArity(s)}catch(o){t.push(o)}try{i.assertAllApplicationsAreValid(s,e)}catch(o){t.push(o),n=!0}}),n||Object.keys(e.rules).forEach(s=>{let{body:i}=e.rules[s];try{i.assertIteratedExprsAreNotNullable(e,[])}catch(o){t.push(o)}}),t.length>0&&Vr(t),this.source&&(e.source=this.source),e}define(e,t,n,s,i,o){if(this.ensureSuperGrammar(),this.superGrammar.rules[e])throw pt(e,this.name,this.superGrammar.name,i);if(this.rules[e])throw pt(e,this.name,this.name,i);let l=Ve(t);if(l.length>0)throw ht(e,l,i);return this.install(e,t,n,s,i,o)}override(e,t,n,s,i){return this.ensureSuperGrammarRuleForOverriding(e,i),this.installOverriddenOrExtendedRule(e,t,n,i),this}extend(e,t,n,s,i){if(!this.ensureSuperGrammar().rules[e])throw Cr(e,this.superGrammar.name,i);let l=new J(this.superGrammar,e,n);return l.source=n.source,this.installOverriddenOrExtendedRule(e,t,l,i),this}},ne=class{constructor(){this.currentDecl=null,this.currentRuleName=null}newGrammar(e){return new ye(e)}grammar(e,t,n,s,i){let o=new ye(t);return n&&o.withSuperGrammar(n instanceof C?n:this.fromRecipe(n)),s&&o.withDefaultStartRule(s),e&&e.source&&o.withSource(e.source),this.currentDecl=o,Object.keys(i).forEach(l=>{this.currentRuleName=l;let a=i[l],p=a[0],u=a[1],c=a[2],h=a[3],m=this.fromRecipe(a[4]),g;o.source&&u&&u.sourceInterval&&(g=o.source.subInterval(u.sourceInterval[0],u.sourceInterval[1]-u.sourceInterval[0])),o[p](l,h,m,c,g)}),this.currentRuleName=this.currentDecl=null,o.build()}terminal(e){return new E(e)}range(e,t){return new A(e,t)}param(e){return new _(e)}alt(...e){let t=[];for(let n of e)n instanceof d||(n=this.fromRecipe(n)),n instanceof v?t=t.concat(n.terms):t.push(n);return t.length===1?t[0]:new v(t)}seq(...e){let t=[];for(let n of e)n instanceof d||(n=this.fromRecipe(n)),n instanceof y?t=t.concat(n.factors):t.push(n);return t.length===1?t[0]:new y(t)}star(e){return e instanceof d||(e=this.fromRecipe(e)),new V(e)}plus(e){return e instanceof d||(e=this.fromRecipe(e)),new G(e)}opt(e){return e instanceof d||(e=this.fromRecipe(e)),new k(e)}not(e){return e instanceof d||(e=this.fromRecipe(e)),new N(e)}lookahead(e){return e instanceof d||(e=this.fromRecipe(e)),new O(e)}lex(e){return e instanceof d||(e=this.fromRecipe(e)),new L(e)}app(e,t){return t&&t.length>0&&(t=t.map(function(n){return n instanceof d?n:this.fromRecipe(n)},this)),new f(e,t)}splice(e,t){return new Z(this.currentDecl.superGrammar,this.currentRuleName,e.map(n=>this.fromRecipe(n)),t.map(n=>this.fromRecipe(n)))}fromRecipe(e){let t=e[0]===\"grammar\"?e.slice(1):e.slice(2),n=this[e[0]](...t),s=e[1];return s&&s.sourceInterval&&this.currentDecl&&n.withSource(this.currentDecl.sourceInterval(...s.sourceInterval)),n}};function Se(r){return typeof r==\"function\"?r.call(new ne):(typeof r==\"string\"&&(r=JSON.parse(r)),new ne().fromRecipe(r))}var tt=Se([\"grammar\",{source:`BuiltInRules {\n\n  alnum  (an alpha-numeric character)\n    = letter\n    | digit\n\n  letter  (a letter)\n    = lower\n    | upper\n    | unicodeLtmo\n\n  digit  (a digit)\n    = \"0\"..\"9\"\n\n  hexDigit  (a hexadecimal digit)\n    = digit\n    | \"a\"..\"f\"\n    | \"A\"..\"F\"\n\n  ListOf<elem, sep>\n    = NonemptyListOf<elem, sep>\n    | EmptyListOf<elem, sep>\n\n  NonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  EmptyListOf<elem, sep>\n    = /* nothing */\n\n  listOf<elem, sep>\n    = nonemptyListOf<elem, sep>\n    | emptyListOf<elem, sep>\n\n  nonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  emptyListOf<elem, sep>\n    = /* nothing */\n\n  // Allows a syntactic rule application within a lexical context.\n  applySyntactic<app> = app\n}`},\"BuiltInRules\",null,null,{alnum:[\"define\",{sourceInterval:[18,78]},\"an alpha-numeric character\",[],[\"alt\",{sourceInterval:[60,78]},[\"app\",{sourceInterval:[60,66]},\"letter\",[]],[\"app\",{sourceInterval:[73,78]},\"digit\",[]]]],letter:[\"define\",{sourceInterval:[82,142]},\"a letter\",[],[\"alt\",{sourceInterval:[107,142]},[\"app\",{sourceInterval:[107,112]},\"lower\",[]],[\"app\",{sourceInterval:[119,124]},\"upper\",[]],[\"app\",{sourceInterval:[131,142]},\"unicodeLtmo\",[]]]],digit:[\"define\",{sourceInterval:[146,177]},\"a digit\",[],[\"range\",{sourceInterval:[169,177]},\"0\",\"9\"]],hexDigit:[\"define\",{sourceInterval:[181,254]},\"a hexadecimal digit\",[],[\"alt\",{sourceInterval:[219,254]},[\"app\",{sourceInterval:[219,224]},\"digit\",[]],[\"range\",{sourceInterval:[231,239]},\"a\",\"f\"],[\"range\",{sourceInterval:[246,254]},\"A\",\"F\"]]],ListOf:[\"define\",{sourceInterval:[258,336]},null,[\"elem\",\"sep\"],[\"alt\",{sourceInterval:[282,336]},[\"app\",{sourceInterval:[282,307]},\"NonemptyListOf\",[[\"param\",{sourceInterval:[297,301]},0],[\"param\",{sourceInterval:[303,306]},1]]],[\"app\",{sourceInterval:[314,336]},\"EmptyListOf\",[[\"param\",{sourceInterval:[326,330]},0],[\"param\",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:[\"define\",{sourceInterval:[340,388]},null,[\"elem\",\"sep\"],[\"seq\",{sourceInterval:[372,388]},[\"param\",{sourceInterval:[372,376]},0],[\"star\",{sourceInterval:[377,388]},[\"seq\",{sourceInterval:[378,386]},[\"param\",{sourceInterval:[378,381]},1],[\"param\",{sourceInterval:[382,386]},0]]]]],EmptyListOf:[\"define\",{sourceInterval:[392,434]},null,[\"elem\",\"sep\"],[\"seq\",{sourceInterval:[438,438]}]],listOf:[\"define\",{sourceInterval:[438,516]},null,[\"elem\",\"sep\"],[\"alt\",{sourceInterval:[462,516]},[\"app\",{sourceInterval:[462,487]},\"nonemptyListOf\",[[\"param\",{sourceInterval:[477,481]},0],[\"param\",{sourceInterval:[483,486]},1]]],[\"app\",{sourceInterval:[494,516]},\"emptyListOf\",[[\"param\",{sourceInterval:[506,510]},0],[\"param\",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:[\"define\",{sourceInterval:[520,568]},null,[\"elem\",\"sep\"],[\"seq\",{sourceInterval:[552,568]},[\"param\",{sourceInterval:[552,556]},0],[\"star\",{sourceInterval:[557,568]},[\"seq\",{sourceInterval:[558,566]},[\"param\",{sourceInterval:[558,561]},1],[\"param\",{sourceInterval:[562,566]},0]]]]],emptyListOf:[\"define\",{sourceInterval:[572,682]},null,[\"elem\",\"sep\"],[\"seq\",{sourceInterval:[685,685]}]],applySyntactic:[\"define\",{sourceInterval:[685,710]},null,[\"app\"],[\"param\",{sourceInterval:[707,710]},0]]}]);C.BuiltInRules=tt;Ur(C.BuiltInRules);var Ae=Se([\"grammar\",{source:`Ohm {\n\n  Grammars\n    = Grammar*\n\n  Grammar\n    = ident SuperGrammar? \"{\" Rule* \"}\"\n\n  SuperGrammar\n    = \"<:\" ident\n\n  Rule\n    = ident Formals? ruleDescr? \"=\"  RuleBody  -- define\n    | ident Formals?            \":=\" OverrideRuleBody  -- override\n    | ident Formals?            \"+=\" RuleBody  -- extend\n\n  RuleBody\n    = \"|\"? NonemptyListOf<TopLevelTerm, \"|\">\n\n  TopLevelTerm\n    = Seq caseName  -- inline\n    | Seq\n\n  OverrideRuleBody\n    = \"|\"? NonemptyListOf<OverrideTopLevelTerm, \"|\">\n\n  OverrideTopLevelTerm\n    = \"...\"  -- superSplice\n    | TopLevelTerm\n\n  Formals\n    = \"<\" ListOf<ident, \",\"> \">\"\n\n  Params\n    = \"<\" ListOf<Seq, \",\"> \">\"\n\n  Alt\n    = NonemptyListOf<Seq, \"|\">\n\n  Seq\n    = Iter*\n\n  Iter\n    = Pred \"*\"  -- star\n    | Pred \"+\"  -- plus\n    | Pred \"?\"  -- opt\n    | Pred\n\n  Pred\n    = \"~\" Lex  -- not\n    | \"&\" Lex  -- lookahead\n    | Lex\n\n  Lex\n    = \"#\" Base  -- lex\n    | Base\n\n  Base\n    = ident Params? ~(ruleDescr? \"=\" | \":=\" | \"+=\")  -- application\n    | oneCharTerminal \"..\" oneCharTerminal           -- range\n    | terminal                                       -- terminal\n    | \"(\" Alt \")\"                                    -- paren\n\n  ruleDescr  (a rule description)\n    = \"(\" ruleDescrText \")\"\n\n  ruleDescrText\n    = (~\")\" any)*\n\n  caseName\n    = \"--\" (~\"\\\\n\" space)* name (~\"\\\\n\" space)* (\"\\\\n\" | &\"}\")\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = \"_\"\n    | letter\n\n  nameRest\n    = \"_\"\n    | alnum\n\n  ident  (an identifier)\n    = name\n\n  terminal\n    = \"\\\\\"\" terminalChar* \"\\\\\"\"\n\n  oneCharTerminal\n    = \"\\\\\"\" terminalChar \"\\\\\"\"\n\n  terminalChar\n    = escapeChar\n      | ~\"\\\\\\\\\" ~\"\\\\\"\" ~\"\\\\n\" \"\\\\u{0}\"..\"\\\\u{10FFFF}\"\n\n  escapeChar  (an escape sequence)\n    = \"\\\\\\\\\\\\\\\\\"                                     -- backslash\n    | \"\\\\\\\\\\\\\"\"                                     -- doubleQuote\n    | \"\\\\\\\\\\\\'\"                                     -- singleQuote\n    | \"\\\\\\\\b\"                                      -- backspace\n    | \"\\\\\\\\n\"                                      -- lineFeed\n    | \"\\\\\\\\r\"                                      -- carriageReturn\n    | \"\\\\\\\\t\"                                      -- tab\n    | \"\\\\\\\\u{\" hexDigit hexDigit? hexDigit?\n             hexDigit? hexDigit? hexDigit? \"}\"   -- unicodeCodePoint\n    | \"\\\\\\\\u\" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\n    | \"\\\\\\\\x\" hexDigit hexDigit                    -- hexEscape\n\n  space\n   += comment\n\n  comment\n    = \"//\" (~\"\\\\n\" any)* &(\"\\\\n\" | end)  -- singleLine\n    | \"/*\" (~\"*/\" any)* \"*/\"  -- multiLine\n\n  tokens = token*\n\n  token = caseName | comment | ident | operator | punctuation | terminal | any\n\n  operator = \"<:\" | \"=\" | \":=\" | \"+=\" | \"*\" | \"+\" | \"?\" | \"~\" | \"&\"\n\n  punctuation = \"<\" | \">\" | \",\" | \"--\"\n}`},\"Ohm\",null,\"Grammars\",{Grammars:[\"define\",{sourceInterval:[9,32]},null,[],[\"star\",{sourceInterval:[24,32]},[\"app\",{sourceInterval:[24,31]},\"Grammar\",[]]]],Grammar:[\"define\",{sourceInterval:[36,83]},null,[],[\"seq\",{sourceInterval:[50,83]},[\"app\",{sourceInterval:[50,55]},\"ident\",[]],[\"opt\",{sourceInterval:[56,69]},[\"app\",{sourceInterval:[56,68]},\"SuperGrammar\",[]]],[\"terminal\",{sourceInterval:[70,73]},\"{\"],[\"star\",{sourceInterval:[74,79]},[\"app\",{sourceInterval:[74,78]},\"Rule\",[]]],[\"terminal\",{sourceInterval:[80,83]},\"}\"]]],SuperGrammar:[\"define\",{sourceInterval:[87,116]},null,[],[\"seq\",{sourceInterval:[106,116]},[\"terminal\",{sourceInterval:[106,110]},\"<:\"],[\"app\",{sourceInterval:[111,116]},\"ident\",[]]]],Rule_define:[\"define\",{sourceInterval:[131,181]},null,[],[\"seq\",{sourceInterval:[131,170]},[\"app\",{sourceInterval:[131,136]},\"ident\",[]],[\"opt\",{sourceInterval:[137,145]},[\"app\",{sourceInterval:[137,144]},\"Formals\",[]]],[\"opt\",{sourceInterval:[146,156]},[\"app\",{sourceInterval:[146,155]},\"ruleDescr\",[]]],[\"terminal\",{sourceInterval:[157,160]},\"=\"],[\"app\",{sourceInterval:[162,170]},\"RuleBody\",[]]]],Rule_override:[\"define\",{sourceInterval:[188,248]},null,[],[\"seq\",{sourceInterval:[188,235]},[\"app\",{sourceInterval:[188,193]},\"ident\",[]],[\"opt\",{sourceInterval:[194,202]},[\"app\",{sourceInterval:[194,201]},\"Formals\",[]]],[\"terminal\",{sourceInterval:[214,218]},\":=\"],[\"app\",{sourceInterval:[219,235]},\"OverrideRuleBody\",[]]]],Rule_extend:[\"define\",{sourceInterval:[255,305]},null,[],[\"seq\",{sourceInterval:[255,294]},[\"app\",{sourceInterval:[255,260]},\"ident\",[]],[\"opt\",{sourceInterval:[261,269]},[\"app\",{sourceInterval:[261,268]},\"Formals\",[]]],[\"terminal\",{sourceInterval:[281,285]},\"+=\"],[\"app\",{sourceInterval:[286,294]},\"RuleBody\",[]]]],Rule:[\"define\",{sourceInterval:[120,305]},null,[],[\"alt\",{sourceInterval:[131,305]},[\"app\",{sourceInterval:[131,170]},\"Rule_define\",[]],[\"app\",{sourceInterval:[188,235]},\"Rule_override\",[]],[\"app\",{sourceInterval:[255,294]},\"Rule_extend\",[]]]],RuleBody:[\"define\",{sourceInterval:[309,362]},null,[],[\"seq\",{sourceInterval:[324,362]},[\"opt\",{sourceInterval:[324,328]},[\"terminal\",{sourceInterval:[324,327]},\"|\"]],[\"app\",{sourceInterval:[329,362]},\"NonemptyListOf\",[[\"app\",{sourceInterval:[344,356]},\"TopLevelTerm\",[]],[\"terminal\",{sourceInterval:[358,361]},\"|\"]]]]],TopLevelTerm_inline:[\"define\",{sourceInterval:[385,408]},null,[],[\"seq\",{sourceInterval:[385,397]},[\"app\",{sourceInterval:[385,388]},\"Seq\",[]],[\"app\",{sourceInterval:[389,397]},\"caseName\",[]]]],TopLevelTerm:[\"define\",{sourceInterval:[366,418]},null,[],[\"alt\",{sourceInterval:[385,418]},[\"app\",{sourceInterval:[385,397]},\"TopLevelTerm_inline\",[]],[\"app\",{sourceInterval:[415,418]},\"Seq\",[]]]],OverrideRuleBody:[\"define\",{sourceInterval:[422,491]},null,[],[\"seq\",{sourceInterval:[445,491]},[\"opt\",{sourceInterval:[445,449]},[\"terminal\",{sourceInterval:[445,448]},\"|\"]],[\"app\",{sourceInterval:[450,491]},\"NonemptyListOf\",[[\"app\",{sourceInterval:[465,485]},\"OverrideTopLevelTerm\",[]],[\"terminal\",{sourceInterval:[487,490]},\"|\"]]]]],OverrideTopLevelTerm_superSplice:[\"define\",{sourceInterval:[522,543]},null,[],[\"terminal\",{sourceInterval:[522,527]},\"...\"]],OverrideTopLevelTerm:[\"define\",{sourceInterval:[495,562]},null,[],[\"alt\",{sourceInterval:[522,562]},[\"app\",{sourceInterval:[522,527]},\"OverrideTopLevelTerm_superSplice\",[]],[\"app\",{sourceInterval:[550,562]},\"TopLevelTerm\",[]]]],Formals:[\"define\",{sourceInterval:[566,606]},null,[],[\"seq\",{sourceInterval:[580,606]},[\"terminal\",{sourceInterval:[580,583]},\"<\"],[\"app\",{sourceInterval:[584,602]},\"ListOf\",[[\"app\",{sourceInterval:[591,596]},\"ident\",[]],[\"terminal\",{sourceInterval:[598,601]},\",\"]]],[\"terminal\",{sourceInterval:[603,606]},\">\"]]],Params:[\"define\",{sourceInterval:[610,647]},null,[],[\"seq\",{sourceInterval:[623,647]},[\"terminal\",{sourceInterval:[623,626]},\"<\"],[\"app\",{sourceInterval:[627,643]},\"ListOf\",[[\"app\",{sourceInterval:[634,637]},\"Seq\",[]],[\"terminal\",{sourceInterval:[639,642]},\",\"]]],[\"terminal\",{sourceInterval:[644,647]},\">\"]]],Alt:[\"define\",{sourceInterval:[651,685]},null,[],[\"app\",{sourceInterval:[661,685]},\"NonemptyListOf\",[[\"app\",{sourceInterval:[676,679]},\"Seq\",[]],[\"terminal\",{sourceInterval:[681,684]},\"|\"]]]],Seq:[\"define\",{sourceInterval:[689,704]},null,[],[\"star\",{sourceInterval:[699,704]},[\"app\",{sourceInterval:[699,703]},\"Iter\",[]]]],Iter_star:[\"define\",{sourceInterval:[719,736]},null,[],[\"seq\",{sourceInterval:[719,727]},[\"app\",{sourceInterval:[719,723]},\"Pred\",[]],[\"terminal\",{sourceInterval:[724,727]},\"*\"]]],Iter_plus:[\"define\",{sourceInterval:[743,760]},null,[],[\"seq\",{sourceInterval:[743,751]},[\"app\",{sourceInterval:[743,747]},\"Pred\",[]],[\"terminal\",{sourceInterval:[748,751]},\"+\"]]],Iter_opt:[\"define\",{sourceInterval:[767,783]},null,[],[\"seq\",{sourceInterval:[767,775]},[\"app\",{sourceInterval:[767,771]},\"Pred\",[]],[\"terminal\",{sourceInterval:[772,775]},\"?\"]]],Iter:[\"define\",{sourceInterval:[708,794]},null,[],[\"alt\",{sourceInterval:[719,794]},[\"app\",{sourceInterval:[719,727]},\"Iter_star\",[]],[\"app\",{sourceInterval:[743,751]},\"Iter_plus\",[]],[\"app\",{sourceInterval:[767,775]},\"Iter_opt\",[]],[\"app\",{sourceInterval:[790,794]},\"Pred\",[]]]],Pred_not:[\"define\",{sourceInterval:[809,824]},null,[],[\"seq\",{sourceInterval:[809,816]},[\"terminal\",{sourceInterval:[809,812]},\"~\"],[\"app\",{sourceInterval:[813,816]},\"Lex\",[]]]],Pred_lookahead:[\"define\",{sourceInterval:[831,852]},null,[],[\"seq\",{sourceInterval:[831,838]},[\"terminal\",{sourceInterval:[831,834]},\"&\"],[\"app\",{sourceInterval:[835,838]},\"Lex\",[]]]],Pred:[\"define\",{sourceInterval:[798,862]},null,[],[\"alt\",{sourceInterval:[809,862]},[\"app\",{sourceInterval:[809,816]},\"Pred_not\",[]],[\"app\",{sourceInterval:[831,838]},\"Pred_lookahead\",[]],[\"app\",{sourceInterval:[859,862]},\"Lex\",[]]]],Lex_lex:[\"define\",{sourceInterval:[876,892]},null,[],[\"seq\",{sourceInterval:[876,884]},[\"terminal\",{sourceInterval:[876,879]},\"#\"],[\"app\",{sourceInterval:[880,884]},\"Base\",[]]]],Lex:[\"define\",{sourceInterval:[866,903]},null,[],[\"alt\",{sourceInterval:[876,903]},[\"app\",{sourceInterval:[876,884]},\"Lex_lex\",[]],[\"app\",{sourceInterval:[899,903]},\"Base\",[]]]],Base_application:[\"define\",{sourceInterval:[918,979]},null,[],[\"seq\",{sourceInterval:[918,963]},[\"app\",{sourceInterval:[918,923]},\"ident\",[]],[\"opt\",{sourceInterval:[924,931]},[\"app\",{sourceInterval:[924,930]},\"Params\",[]]],[\"not\",{sourceInterval:[932,963]},[\"alt\",{sourceInterval:[934,962]},[\"seq\",{sourceInterval:[934,948]},[\"opt\",{sourceInterval:[934,944]},[\"app\",{sourceInterval:[934,943]},\"ruleDescr\",[]]],[\"terminal\",{sourceInterval:[945,948]},\"=\"]],[\"terminal\",{sourceInterval:[951,955]},\":=\"],[\"terminal\",{sourceInterval:[958,962]},\"+=\"]]]]],Base_range:[\"define\",{sourceInterval:[986,1041]},null,[],[\"seq\",{sourceInterval:[986,1022]},[\"app\",{sourceInterval:[986,1001]},\"oneCharTerminal\",[]],[\"terminal\",{sourceInterval:[1002,1006]},\"..\"],[\"app\",{sourceInterval:[1007,1022]},\"oneCharTerminal\",[]]]],Base_terminal:[\"define\",{sourceInterval:[1048,1106]},null,[],[\"app\",{sourceInterval:[1048,1056]},\"terminal\",[]]],Base_paren:[\"define\",{sourceInterval:[1113,1168]},null,[],[\"seq\",{sourceInterval:[1113,1124]},[\"terminal\",{sourceInterval:[1113,1116]},\"(\"],[\"app\",{sourceInterval:[1117,1120]},\"Alt\",[]],[\"terminal\",{sourceInterval:[1121,1124]},\")\"]]],Base:[\"define\",{sourceInterval:[907,1168]},null,[],[\"alt\",{sourceInterval:[918,1168]},[\"app\",{sourceInterval:[918,963]},\"Base_application\",[]],[\"app\",{sourceInterval:[986,1022]},\"Base_range\",[]],[\"app\",{sourceInterval:[1048,1056]},\"Base_terminal\",[]],[\"app\",{sourceInterval:[1113,1124]},\"Base_paren\",[]]]],ruleDescr:[\"define\",{sourceInterval:[1172,1231]},\"a rule description\",[],[\"seq\",{sourceInterval:[1210,1231]},[\"terminal\",{sourceInterval:[1210,1213]},\"(\"],[\"app\",{sourceInterval:[1214,1227]},\"ruleDescrText\",[]],[\"terminal\",{sourceInterval:[1228,1231]},\")\"]]],ruleDescrText:[\"define\",{sourceInterval:[1235,1266]},null,[],[\"star\",{sourceInterval:[1255,1266]},[\"seq\",{sourceInterval:[1256,1264]},[\"not\",{sourceInterval:[1256,1260]},[\"terminal\",{sourceInterval:[1257,1260]},\")\"]],[\"app\",{sourceInterval:[1261,1264]},\"any\",[]]]]],caseName:[\"define\",{sourceInterval:[1270,1338]},null,[],[\"seq\",{sourceInterval:[1285,1338]},[\"terminal\",{sourceInterval:[1285,1289]},\"--\"],[\"star\",{sourceInterval:[1290,1304]},[\"seq\",{sourceInterval:[1291,1302]},[\"not\",{sourceInterval:[1291,1296]},[\"terminal\",{sourceInterval:[1292,1296]},`\n`]],[\"app\",{sourceInterval:[1297,1302]},\"space\",[]]]],[\"app\",{sourceInterval:[1305,1309]},\"name\",[]],[\"star\",{sourceInterval:[1310,1324]},[\"seq\",{sourceInterval:[1311,1322]},[\"not\",{sourceInterval:[1311,1316]},[\"terminal\",{sourceInterval:[1312,1316]},`\n`]],[\"app\",{sourceInterval:[1317,1322]},\"space\",[]]]],[\"alt\",{sourceInterval:[1326,1337]},[\"terminal\",{sourceInterval:[1326,1330]},`\n`],[\"lookahead\",{sourceInterval:[1333,1337]},[\"terminal\",{sourceInterval:[1334,1337]},\"}\"]]]]],name:[\"define\",{sourceInterval:[1342,1382]},\"a name\",[],[\"seq\",{sourceInterval:[1363,1382]},[\"app\",{sourceInterval:[1363,1372]},\"nameFirst\",[]],[\"star\",{sourceInterval:[1373,1382]},[\"app\",{sourceInterval:[1373,1381]},\"nameRest\",[]]]]],nameFirst:[\"define\",{sourceInterval:[1386,1418]},null,[],[\"alt\",{sourceInterval:[1402,1418]},[\"terminal\",{sourceInterval:[1402,1405]},\"_\"],[\"app\",{sourceInterval:[1412,1418]},\"letter\",[]]]],nameRest:[\"define\",{sourceInterval:[1422,1452]},null,[],[\"alt\",{sourceInterval:[1437,1452]},[\"terminal\",{sourceInterval:[1437,1440]},\"_\"],[\"app\",{sourceInterval:[1447,1452]},\"alnum\",[]]]],ident:[\"define\",{sourceInterval:[1456,1489]},\"an identifier\",[],[\"app\",{sourceInterval:[1485,1489]},\"name\",[]]],terminal:[\"define\",{sourceInterval:[1493,1531]},null,[],[\"seq\",{sourceInterval:[1508,1531]},[\"terminal\",{sourceInterval:[1508,1512]},'\"'],[\"star\",{sourceInterval:[1513,1526]},[\"app\",{sourceInterval:[1513,1525]},\"terminalChar\",[]]],[\"terminal\",{sourceInterval:[1527,1531]},'\"']]],oneCharTerminal:[\"define\",{sourceInterval:[1535,1579]},null,[],[\"seq\",{sourceInterval:[1557,1579]},[\"terminal\",{sourceInterval:[1557,1561]},'\"'],[\"app\",{sourceInterval:[1562,1574]},\"terminalChar\",[]],[\"terminal\",{sourceInterval:[1575,1579]},'\"']]],terminalChar:[\"define\",{sourceInterval:[1583,1660]},null,[],[\"alt\",{sourceInterval:[1602,1660]},[\"app\",{sourceInterval:[1602,1612]},\"escapeChar\",[]],[\"seq\",{sourceInterval:[1621,1660]},[\"not\",{sourceInterval:[1621,1626]},[\"terminal\",{sourceInterval:[1622,1626]},\"\\\\\"]],[\"not\",{sourceInterval:[1627,1632]},[\"terminal\",{sourceInterval:[1628,1632]},'\"']],[\"not\",{sourceInterval:[1633,1638]},[\"terminal\",{sourceInterval:[1634,1638]},`\n`]],[\"range\",{sourceInterval:[1639,1660]},\"\\0\",\"\\u{10FFFF}\"]]]],escapeChar_backslash:[\"define\",{sourceInterval:[1703,1758]},null,[],[\"terminal\",{sourceInterval:[1703,1709]},\"\\\\\\\\\"]],escapeChar_doubleQuote:[\"define\",{sourceInterval:[1765,1822]},null,[],[\"terminal\",{sourceInterval:[1765,1771]},'\\\\\"']],escapeChar_singleQuote:[\"define\",{sourceInterval:[1829,1886]},null,[],[\"terminal\",{sourceInterval:[1829,1835]},\"\\\\'\"]],escapeChar_backspace:[\"define\",{sourceInterval:[1893,1948]},null,[],[\"terminal\",{sourceInterval:[1893,1898]},\"\\\\b\"]],escapeChar_lineFeed:[\"define\",{sourceInterval:[1955,2009]},null,[],[\"terminal\",{sourceInterval:[1955,1960]},\"\\\\n\"]],escapeChar_carriageReturn:[\"define\",{sourceInterval:[2016,2076]},null,[],[\"terminal\",{sourceInterval:[2016,2021]},\"\\\\r\"]],escapeChar_tab:[\"define\",{sourceInterval:[2083,2132]},null,[],[\"terminal\",{sourceInterval:[2083,2088]},\"\\\\t\"]],escapeChar_unicodeCodePoint:[\"define\",{sourceInterval:[2139,2243]},null,[],[\"seq\",{sourceInterval:[2139,2221]},[\"terminal\",{sourceInterval:[2139,2145]},\"\\\\u{\"],[\"app\",{sourceInterval:[2146,2154]},\"hexDigit\",[]],[\"opt\",{sourceInterval:[2155,2164]},[\"app\",{sourceInterval:[2155,2163]},\"hexDigit\",[]]],[\"opt\",{sourceInterval:[2165,2174]},[\"app\",{sourceInterval:[2165,2173]},\"hexDigit\",[]]],[\"opt\",{sourceInterval:[2188,2197]},[\"app\",{sourceInterval:[2188,2196]},\"hexDigit\",[]]],[\"opt\",{sourceInterval:[2198,2207]},[\"app\",{sourceInterval:[2198,2206]},\"hexDigit\",[]]],[\"opt\",{sourceInterval:[2208,2217]},[\"app\",{sourceInterval:[2208,2216]},\"hexDigit\",[]]],[\"terminal\",{sourceInterval:[2218,2221]},\"}\"]]],escapeChar_unicodeEscape:[\"define\",{sourceInterval:[2250,2309]},null,[],[\"seq\",{sourceInterval:[2250,2291]},[\"terminal\",{sourceInterval:[2250,2255]},\"\\\\u\"],[\"app\",{sourceInterval:[2256,2264]},\"hexDigit\",[]],[\"app\",{sourceInterval:[2265,2273]},\"hexDigit\",[]],[\"app\",{sourceInterval:[2274,2282]},\"hexDigit\",[]],[\"app\",{sourceInterval:[2283,2291]},\"hexDigit\",[]]]],escapeChar_hexEscape:[\"define\",{sourceInterval:[2316,2371]},null,[],[\"seq\",{sourceInterval:[2316,2339]},[\"terminal\",{sourceInterval:[2316,2321]},\"\\\\x\"],[\"app\",{sourceInterval:[2322,2330]},\"hexDigit\",[]],[\"app\",{sourceInterval:[2331,2339]},\"hexDigit\",[]]]],escapeChar:[\"define\",{sourceInterval:[1664,2371]},\"an escape sequence\",[],[\"alt\",{sourceInterval:[1703,2371]},[\"app\",{sourceInterval:[1703,1709]},\"escapeChar_backslash\",[]],[\"app\",{sourceInterval:[1765,1771]},\"escapeChar_doubleQuote\",[]],[\"app\",{sourceInterval:[1829,1835]},\"escapeChar_singleQuote\",[]],[\"app\",{sourceInterval:[1893,1898]},\"escapeChar_backspace\",[]],[\"app\",{sourceInterval:[1955,1960]},\"escapeChar_lineFeed\",[]],[\"app\",{sourceInterval:[2016,2021]},\"escapeChar_carriageReturn\",[]],[\"app\",{sourceInterval:[2083,2088]},\"escapeChar_tab\",[]],[\"app\",{sourceInterval:[2139,2221]},\"escapeChar_unicodeCodePoint\",[]],[\"app\",{sourceInterval:[2250,2291]},\"escapeChar_unicodeEscape\",[]],[\"app\",{sourceInterval:[2316,2339]},\"escapeChar_hexEscape\",[]]]],space:[\"extend\",{sourceInterval:[2375,2394]},null,[],[\"app\",{sourceInterval:[2387,2394]},\"comment\",[]]],comment_singleLine:[\"define\",{sourceInterval:[2412,2458]},null,[],[\"seq\",{sourceInterval:[2412,2443]},[\"terminal\",{sourceInterval:[2412,2416]},\"//\"],[\"star\",{sourceInterval:[2417,2429]},[\"seq\",{sourceInterval:[2418,2427]},[\"not\",{sourceInterval:[2418,2423]},[\"terminal\",{sourceInterval:[2419,2423]},`\n`]],[\"app\",{sourceInterval:[2424,2427]},\"any\",[]]]],[\"lookahead\",{sourceInterval:[2430,2443]},[\"alt\",{sourceInterval:[2432,2442]},[\"terminal\",{sourceInterval:[2432,2436]},`\n`],[\"app\",{sourceInterval:[2439,2442]},\"end\",[]]]]]],comment_multiLine:[\"define\",{sourceInterval:[2465,2501]},null,[],[\"seq\",{sourceInterval:[2465,2487]},[\"terminal\",{sourceInterval:[2465,2469]},\"/*\"],[\"star\",{sourceInterval:[2470,2482]},[\"seq\",{sourceInterval:[2471,2480]},[\"not\",{sourceInterval:[2471,2476]},[\"terminal\",{sourceInterval:[2472,2476]},\"*/\"]],[\"app\",{sourceInterval:[2477,2480]},\"any\",[]]]],[\"terminal\",{sourceInterval:[2483,2487]},\"*/\"]]],comment:[\"define\",{sourceInterval:[2398,2501]},null,[],[\"alt\",{sourceInterval:[2412,2501]},[\"app\",{sourceInterval:[2412,2443]},\"comment_singleLine\",[]],[\"app\",{sourceInterval:[2465,2487]},\"comment_multiLine\",[]]]],tokens:[\"define\",{sourceInterval:[2505,2520]},null,[],[\"star\",{sourceInterval:[2514,2520]},[\"app\",{sourceInterval:[2514,2519]},\"token\",[]]]],token:[\"define\",{sourceInterval:[2524,2600]},null,[],[\"alt\",{sourceInterval:[2532,2600]},[\"app\",{sourceInterval:[2532,2540]},\"caseName\",[]],[\"app\",{sourceInterval:[2543,2550]},\"comment\",[]],[\"app\",{sourceInterval:[2553,2558]},\"ident\",[]],[\"app\",{sourceInterval:[2561,2569]},\"operator\",[]],[\"app\",{sourceInterval:[2572,2583]},\"punctuation\",[]],[\"app\",{sourceInterval:[2586,2594]},\"terminal\",[]],[\"app\",{sourceInterval:[2597,2600]},\"any\",[]]]],operator:[\"define\",{sourceInterval:[2604,2669]},null,[],[\"alt\",{sourceInterval:[2615,2669]},[\"terminal\",{sourceInterval:[2615,2619]},\"<:\"],[\"terminal\",{sourceInterval:[2622,2625]},\"=\"],[\"terminal\",{sourceInterval:[2628,2632]},\":=\"],[\"terminal\",{sourceInterval:[2635,2639]},\"+=\"],[\"terminal\",{sourceInterval:[2642,2645]},\"*\"],[\"terminal\",{sourceInterval:[2648,2651]},\"+\"],[\"terminal\",{sourceInterval:[2654,2657]},\"?\"],[\"terminal\",{sourceInterval:[2660,2663]},\"~\"],[\"terminal\",{sourceInterval:[2666,2669]},\"&\"]]],punctuation:[\"define\",{sourceInterval:[2673,2709]},null,[],[\"alt\",{sourceInterval:[2687,2709]},[\"terminal\",{sourceInterval:[2687,2690]},\"<\"],[\"terminal\",{sourceInterval:[2693,2696]},\">\"],[\"terminal\",{sourceInterval:[2699,2702]},\",\"],[\"terminal\",{sourceInterval:[2705,2709]},\"--\"]]]}]),Be=Object.create(d.prototype);function xt(r,e){for(let t in r)if(t===e)return!0;return!1}function rt(r,e,t){let n=new ne,s,i,o,l=!1;return(t||Ae).createSemantics().addOperation(\"visit\",{Grammars(u){return u.children.map(c=>c.visit())},Grammar(u,c,h,m,g){let S=u.visit();s=n.newGrammar(S),c.child(0)&&c.child(0).visit(),m.children.map(z=>z.visit());let w=s.build();if(w.source=this.source.trimmed(),xt(e,S))throw Nr(w);return e[S]=w,w},SuperGrammar(u,c){let h=c.visit();if(h===\"null\")s.withSuperGrammar(null);else{if(!e||!xt(e,h))throw Pr(h,e,c.source);s.withSuperGrammar(e[h])}},Rule_define(u,c,h,m,g){i=u.visit(),o=c.children.map(ae=>ae.visit())[0]||[],!s.defaultStartRule&&s.ensureSuperGrammar()!==C.ProtoBuiltInRules&&s.withDefaultStartRule(i);let S=g.visit(),w=h.children.map(ae=>ae.visit())[0],z=this.source.trimmed();return s.define(i,o,S,w,z)},Rule_override(u,c,h,m){i=u.visit(),o=c.children.map(w=>w.visit())[0]||[];let g=this.source.trimmed();s.ensureSuperGrammarRuleForOverriding(i,g),l=!0;let S=m.visit();return l=!1,s.override(i,o,S,null,g)},Rule_extend(u,c,h,m){i=u.visit(),o=c.children.map(w=>w.visit())[0]||[];let g=m.visit(),S=this.source.trimmed();return s.extend(i,o,g,null,S)},RuleBody(u,c){return n.alt(...c.visit()).withSource(this.source)},OverrideRuleBody(u,c){let h=c.visit(),m=h.indexOf(Be);if(m>=0){let g=h.slice(0,m),S=h.slice(m+1);return S.forEach(w=>{if(w===Be)throw Dr(w)}),new Z(s.superGrammar,i,g,S).withSource(this.source)}else return n.alt(...h).withSource(this.source)},Formals(u,c,h){return c.visit()},Params(u,c,h){return c.visit()},Alt(u){return n.alt(...u.visit()).withSource(this.source)},TopLevelTerm_inline(u,c){let h=i+\"_\"+c.visit(),m=u.visit(),g=this.source.trimmed(),S=!(s.superGrammar&&s.superGrammar.rules[h]);l&&!S?s.override(h,o,m,null,g):s.define(h,o,m,null,g);let w=o.map(z=>n.app(z));return n.app(h,w).withSource(m.source)},OverrideTopLevelTerm_superSplice(u){return Be},Seq(u){return n.seq(...u.children.map(c=>c.visit())).withSource(this.source)},Iter_star(u,c){return n.star(u.visit()).withSource(this.source)},Iter_plus(u,c){return n.plus(u.visit()).withSource(this.source)},Iter_opt(u,c){return n.opt(u.visit()).withSource(this.source)},Pred_not(u,c){return n.not(c.visit()).withSource(this.source)},Pred_lookahead(u,c){return n.lookahead(c.visit()).withSource(this.source)},Lex_lex(u,c){return n.lex(c.visit()).withSource(this.source)},Base_application(u,c){let h=c.children.map(m=>m.visit())[0]||[];return n.app(u.visit(),h).withSource(this.source)},Base_range(u,c,h){return n.range(u.visit(),h.visit()).withSource(this.source)},Base_terminal(u){return n.terminal(u.visit()).withSource(this.source)},Base_paren(u,c,h){return c.visit()},ruleDescr(u,c,h){return c.visit()},ruleDescrText(u){return this.sourceString.trim()},caseName(u,c,h,m,g){return h.visit()},name(u,c){return this.sourceString},nameFirst(u){},nameRest(u){},terminal(u,c,h){return c.children.map(m=>m.visit()).join(\"\")},oneCharTerminal(u,c,h){return c.visit()},escapeChar(u){try{return Nt(this.sourceString)}catch(c){throw c instanceof RangeError&&c.message.startsWith(\"Invalid code point \")?kr(u):c}},NonemptyListOf(u,c,h){return[u.visit()].concat(h.children.map(m=>m.visit()))},EmptyListOf(){return[]},_terminal(){return this.sourceString}})(r).visit()}var on=Se([\"grammar\",{source:`OperationsAndAttributes {\n\n  AttributeSignature =\n    name\n\n  OperationSignature =\n    name Formals?\n\n  Formals\n    = \"(\" ListOf<name, \",\"> \")\"\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = \"_\"\n    | letter\n\n  nameRest\n    = \"_\"\n    | alnum\n\n}`},\"OperationsAndAttributes\",null,\"AttributeSignature\",{AttributeSignature:[\"define\",{sourceInterval:[29,58]},null,[],[\"app\",{sourceInterval:[54,58]},\"name\",[]]],OperationSignature:[\"define\",{sourceInterval:[62,100]},null,[],[\"seq\",{sourceInterval:[87,100]},[\"app\",{sourceInterval:[87,91]},\"name\",[]],[\"opt\",{sourceInterval:[92,100]},[\"app\",{sourceInterval:[92,99]},\"Formals\",[]]]]],Formals:[\"define\",{sourceInterval:[104,143]},null,[],[\"seq\",{sourceInterval:[118,143]},[\"terminal\",{sourceInterval:[118,121]},\"(\"],[\"app\",{sourceInterval:[122,139]},\"ListOf\",[[\"app\",{sourceInterval:[129,133]},\"name\",[]],[\"terminal\",{sourceInterval:[135,138]},\",\"]]],[\"terminal\",{sourceInterval:[140,143]},\")\"]]],name:[\"define\",{sourceInterval:[147,187]},\"a name\",[],[\"seq\",{sourceInterval:[168,187]},[\"app\",{sourceInterval:[168,177]},\"nameFirst\",[]],[\"star\",{sourceInterval:[178,187]},[\"app\",{sourceInterval:[178,186]},\"nameRest\",[]]]]],nameFirst:[\"define\",{sourceInterval:[191,223]},null,[],[\"alt\",{sourceInterval:[207,223]},[\"terminal\",{sourceInterval:[207,210]},\"_\"],[\"app\",{sourceInterval:[217,223]},\"letter\",[]]]],nameRest:[\"define\",{sourceInterval:[227,257]},null,[],[\"alt\",{sourceInterval:[242,257]},[\"terminal\",{sourceInterval:[242,245]},\"_\"],[\"app\",{sourceInterval:[252,257]},\"alnum\",[]]]]}]);an(C.BuiltInRules);ln(on);function an(r){let e={empty(){return this.iteration()},nonEmpty(t,n,s){return this.iteration([t].concat(s.children))}};q.BuiltInSemantics=q.createSemantics(r,null).addOperation(\"asIteration\",{emptyListOf:e.empty,nonemptyListOf:e.nonEmpty,EmptyListOf:e.empty,NonemptyListOf:e.nonEmpty})}function ln(r){q.prototypeGrammarSemantics=r.createSemantics().addOperation(\"parse\",{AttributeSignature(e){return{name:e.parse(),formals:[]}},OperationSignature(e,t){return{name:e.parse(),formals:t.children.map(n=>n.parse())[0]||[]}},Formals(e,t,n){return t.asIteration().children.map(s=>s.parse())},name(e,t){return this.sourceString}}),q.prototypeGrammar=r}function un(r){let e=0,t=[0],n=()=>t[t.length-1],s={},i=/( *).*(?:$|\\r?\\n|\\r)/g,o;for(;(o=i.exec(r))!=null;){let[l,a]=o;if(l.length===0)break;let p=a.length,u=n(),c=e+p;if(p>u)t.push(p),s[c]=1;else if(p<u){let h=t.length;for(;n()!==p;)t.pop();s[c]=-1*(h-t.length)}e+=l.length}return t.length>1&&(s[e]=1-t.length),s}var Dt=\"an indented block\",kt=\"a dedent\",Et=1114111+1,Je=class extends te{constructor(e){super(e.input),this.state=e}_indentationAt(e){return this.state.userData[e]||0}atEnd(){return super.atEnd()&&this._indentationAt(this.pos)===0}next(){if(this._indentationAt(this.pos)!==0){this.examinedLength=Math.max(this.examinedLength,this.pos);return}return super.next()}nextCharCode(){return this._indentationAt(this.pos)!==0?(this.examinedLength=Math.max(this.examinedLength,this.pos),Et):super.nextCharCode()}nextCodePoint(){return this._indentationAt(this.pos)!==0?(this.examinedLength=Math.max(this.examinedLength,this.pos),Et):super.nextCodePoint()}},xe=class extends d{constructor(e=!0){super(),this.isIndent=e}allowsSkippingPrecedingSpace(){return!0}eval(e){let{inputStream:t}=e,n=e.userData;e.doNotMemoize=!0;let s=t.pos,i=this.isIndent?1:-1;return(n[s]||0)*i>0?(e.userData=Object.create(n),e.userData[s]-=i,e.pushBinding(new U(0),s),!0):(e.processFailure(s,this),!1)}getArity(){return 1}_assertAllApplicationsAreValid(e,t){}_isNullable(e,t){return!1}assertChoicesHaveUniformArity(e){}assertIteratedExprsAreNotNullable(e){}introduceParams(e){return this}substituteParams(e){return this}toString(){return this.isIndent?\"indent\":\"dedent\"}toDisplayString(){return this.toString()}toFailure(e){let t=this.isIndent?Dt:kt;return new R(this,t,\"description\")}},cn=new f(\"indent\"),pn=new f(\"dedent\"),hn=new Z(tt,\"any\",[cn,pn],[]),Bt=new ne().newGrammar(\"IndentationSensitive\").withSuperGrammar(tt).define(\"indent\",[],new xe(!0),Dt,void 0,!0).define(\"dedent\",[],new xe(!1),kt,void 0,!0).extend(\"any\",[],hn,\"any character\",void 0).build();Object.assign(Bt,{_matchStateInitializer(r){r.userData=un(r.input),r.inputStream=new Je(r)},supportsIncrementalParsing:!1});var mn=\"17.0.4\";C.initApplicationParser(Ae,rt);var dn=r=>!!r.constructor&&typeof r.constructor.isBuffer==\"function\"&&r.constructor.isBuffer(r);function fn(r,e){let t=Ae.match(r,\"Grammars\");if(t.failed())throw br(t);return rt(t,e)}function gn(r,e){let t=Wt(r,e),n=Object.keys(t);if(n.length===0)throw new Error(\"Missing grammar definition\");if(n.length>1){let i=t[n[1]].source;throw new Error(Xe(i.sourceString,i.startIdx)+\"Found more than one grammar definition -- use ohm.grammars() instead.\")}return t[n[0]]}function Wt(r,e){let t=Object.create(e||{});if(typeof r!=\"string\")if(dn(r))r=r.toString();else throw new TypeError(\"Expected string as first argument, got \"+Ze(r));return fn(r,t),t}j.ExperimentalIndentationSensitive=Bt;j._buildGrammar=rt;j.grammar=gn;j.grammars=Wt;j.makeRecipe=Se;j.ohmGrammar=Ae;j.pexprs=rn;j.version=mn});var Gt=ut((Dn,jt)=>{\"use strict\";var{makeRecipe:vn}=Vt(),In=vn([\"grammar\",{source:`Filter {\\r\n    Expr \\r\n        = FilterWithSelectExpr\\r\n        | FilterWithGroupedAggregedSelectExpr\\r\n        | FilterWithAggregatedSelectExpr\\r\n        | AggregatedSelectionWithGroups\\r\n        | AggregatedSelectionClause\\r\n        | FilterExpr\\r\n        | PropertiesSelectExpr\\r\n    \\r\n    FilterWithSelectExpr = FilterExpr \"->\" PropertiesSelectExpr\\r\n\\r\n    FilterWithAggregatedSelectExpr = FilterExpr \"->\" AggregatedSelectionClause\\r\n    \\r\n    FilterWithGroupedAggregedSelectExpr = FilterExpr \"->\" AggregatedSelectionClause groupedBy PropertiesSelectExpr\\r\n\\r\n    FilterExpr = BoolOr\\r\n    \\r\n    BoolOr\\r\n        = BoolOr orOperation BoolAnd -- or\\r\n        | BoolAnd\\r\n\\r\n    BoolAnd \\r\n        = BoolAnd andOperation PriExp  --and\\r\n        | PriExp\\r\n        \\r\n    PriExp \\r\n        = \"(\" FilterExpr \")\" -- paren\\r\n        | ComparisonExp\\r\n        | NotExpr\\r\n\\r\n    ComparisonExp = EqualityExpr | LessThanExpr | MoreThanExpr | LessThanOrEqualExpr | MoreThanOrEqualExpr | NonEqualityExpr \\r\n        | PropertiesEqualityExpr | PropertiesLessThanExpr | PropertiesMoreThanExpr | PropertiesLessThanOrEqualExpr \\r\n        | PropertiesMoreThanOrEqualExpr | PropertiesNonEqualityExpr \\r\n        | StartsWithExpr | EndsWithExpr | InExpr | NotInExpr | exactElement\\r\n\\r\n    NotExpr = notOperation \"(\" FilterExpr \")\"\\r\n\\r\n    EqualityExpr = propertySequence \"=\" expressionConst | expressionConst \"=\" propertySequence\\r\n    \\r\n    LessThanExpr = propertySequence \"<\" expressionConst | expressionConst \">\" propertySequence\\r\n    \\r\n    MoreThanExpr = propertySequence \">\" expressionConst | expressionConst \"<\" propertySequence\\r\n    \\r\n    LessThanOrEqualExpr = propertySequence \"<=\" expressionConst | expressionConst \">=\" propertySequence\\r\n    \\r\n    MoreThanOrEqualExpr = propertySequence \">=\" expressionConst | expressionConst \"<=\" propertySequence\\r\n\\r\n    NonEqualityExpr = propertySequence nonEqualSign expressionConst | expressionConst nonEqualSign propertySequence\\r\n\\r\n    PropertiesEqualityExpr = propertySequence \"=\" propertySequence\\r\n\\r\n    PropertiesLessThanExpr = propertySequence \"<\" propertySequence\\r\n\\r\n    PropertiesMoreThanExpr = propertySequence \">\" propertySequence\\r\n\\r\n    PropertiesLessThanOrEqualExpr = propertySequence \"<=\" propertySequence\\r\n\\r\n    PropertiesMoreThanOrEqualExpr = propertySequence \">=\" propertySequence\\r\n\\r\n    PropertiesNonEqualityExpr = propertySequence nonEqualSign propertySequence\\r\n\\r\n    StartsWithExpr = propertySequence likeWord startsWithConst\\r\n\\r\n    EndsWithExpr = propertySequence likeWord endsWithConst\\r\n\\r\n    InExpr = propertySequence inWord \"[\" ConstantsListExpr \"]\"\\r\n\\r\n    NotInExpr = propertySequence notWord inWord \"[\" ConstantsListExpr \"]\"\\r\n\\r\n    AggregatedSelectionWithGroups = AggregatedSelectionClause groupedBy PropertiesSelectExpr\\r\n\\r\n    AggregatedSelectionClause = AggregatedFuncsExpr | AnyAggregatedFuncExpr\\r\n\\r\n    AggregatedFuncsExpr = AnyAggregatedFuncExpr (\",\" AnyAggregatedFuncExpr)*\\r\n\\r\n    AnyAggregatedFuncExpr = AggregatedNamedFuncExpr | AggregatedFuncExpr\\r\n\\r\n    AggregatedNamedFuncExpr = AggregatedFuncExpr asWord propertyNameIdentifier\\r\n\\r\n    AggregatedFuncExpr = AggregatedCountExpr | AggregatedSumExpr | AggregatedMinExpr | AggregatedMaxExpr | AggregatedAvgExpr\\r\n\\r\n    AggregatedCountExpr = countWord \"()\"\\r\n\\r\n    AggregatedSumExpr = sumWord \"(\" propertySequence \")\"\\r\n\\r\n    AggregatedMinExpr = minWord \"(\" propertySequence \")\"\\r\n\\r\n    AggregatedMaxExpr = maxWord \"(\" propertySequence \")\"\\r\n\\r\n    AggregatedAvgExpr = avgWord \"(\" propertySequence \")\"\\r\n\\r\n    PropertiesSelectExpr = PropertiesExpr | PropertyIdentifierExpr\\r\n\\r\n    PropertiesExpr = PropertyIdentifierExpr (\",\" PropertyIdentifierExpr)*\\r\n\\r\n    ConstantsListExpr = expressionConst (\",\" expressionConst)*\\r\n\\r\n    PropertyIdentifierExpr\\r\n        = NamedPropertyExpr\\r\n        | propertySequence\\r\n\\r\n    NamedPropertyExpr = propertySequence asWord propertyNameIdentifier\\r\n\\r\n    propertyNameIdentifier = (letter | digit | \"_\")+\\r\n\\r\n    propertySequence = property | directProperty\\r\n                    \\r\n    property \\r\n        =  propertySequence \".\" categoryOrProperty --ofPropertySequence\\r\n        | directAnyPropertySequence \".\" categoryOrProperty --ofDirectAnyPropertySequence\\r\n        | directAnyProperty \".\" categoryOrProperty --ofDirectAny\\r\n                    \\r\n    directProperty \\r\n        = categoryOrProperty \".\" categoryOrProperty --ofCategory\\r\n        | anyProperty \".\" categoryOrProperty --ofAnyProperty\\r\n        \\r\n    directAnyPropertySequence = propertySequence \".\" anyProperty\\r\n        \\r\n    directAnyProperty = directAnyProperty \".\" anyProperty --sequenced\\r\n        | categoryOrProperty \".\" anyProperty --ofCategory\\r\n        | anyProperty \".\" anyProperty --ofAny\\r\n        \\r\n    exactElement = propertySequence \"!\" --ofPropertySequence\\r\n        | categoryOrProperty \"!\" --ofCategory\\r\n    \\r\n    categoryOrProperty (element category or property)\\r\n        = \"[\" identificator \"]\" --inBrackets \\r\n        | alnum+ --value\\r\n\\r\n    groupedBy = caseInsensitive<\"group by\">\\r\n\\r\n    avgWord = caseInsensitive<\"avg\">\\r\n\\r\n    maxWord = caseInsensitive<\"max\">\\r\n\\r\n    minWord = caseInsensitive<\"min\">\\r\n\\r\n    sumWord = caseInsensitive<\"sum\">\\r\n\\r\n    countWord = caseInsensitive<\"count\">\\r\n\\r\n    asWord = caseInsensitive<\"as\">\\r\n\\r\n    nonEqualSign = \"<>\" | \"!=\"\\r\n        \\r\n    andOperation = andWord | \"&&\" | \"&\"\\r\n\\r\n    andWord = caseInsensitive<\"and\">\\r\n    \\r\n    orOperation = orWord | \"||\" | \"|\"\\r\n\\r\n    orWord = caseInsensitive<\"or\">\\r\n\\r\n    likeWord = caseInsensitive<\"like\">\\r\n\\r\n    notOperation = notWord | \"!\"\\r\n\\r\n    notWord = caseInsensitive<\"not\">\\r\n\\r\n    inWord = caseInsensitive<\"in\">\\r\n    \\r\n    anyProperty = \"*\"\\r\n    \\r\n    identificator = (~\"]\" ~\"[\" any)+\\r\n    \\r\n    expressionConst = textConst | number\\r\n\\r\n    startsWithConst\\r\n        = \"\\\\\"\" likeTextValue \"%\\\\\"\"\\r\n\\r\n    endsWithConst\\r\n        = \"\\\\\"%\" likeTextValue \"\\\\\"\"\\r\n    \\r\n    textConst (target text value)\\r\n        = \"\\\\\"\" textValue \"\\\\\"\"\\r\n        \\r\n    textValue = textChar*\\r\n\\r\n    likeTextValue = likeTextChar*\\r\n    \\r\n    textChar\\r\n        = \"\\\\\\\\\\\\\"\"\\r\n        | (~\"\\\\\"\" any)\\r\n\\r\n    likeTextChar\\r\n        = \"\\\\\\\\\\\\\"\"\\r\n        | \"\\\\\\\\%\"\\r\n        | (~(\"\\\\\"\" | \"%\") any)\\r\n        \\r\n    number\\r\n      = positiveNumber\\r\n      | negativeNumber\\r\n      \\r\n    negativeNumber = \"-\" positiveNumber\\r\n    \\r\n    positiveNumber = realNumber | integerNumber\\r\n      \\r\n    integerNumber = digit+\\r\n    \\r\n    realNumber = digit* \".\" digit+\\r\n}`},\"Filter\",null,\"Expr\",{Expr:[\"define\",{sourceInterval:[14,272]},null,[],[\"alt\",{sourceInterval:[31,272]},[\"app\",{sourceInterval:[31,51]},\"FilterWithSelectExpr\",[]],[\"app\",{sourceInterval:[63,98]},\"FilterWithGroupedAggregedSelectExpr\",[]],[\"app\",{sourceInterval:[110,140]},\"FilterWithAggregatedSelectExpr\",[]],[\"app\",{sourceInterval:[152,181]},\"AggregatedSelectionWithGroups\",[]],[\"app\",{sourceInterval:[193,218]},\"AggregatedSelectionClause\",[]],[\"app\",{sourceInterval:[230,240]},\"FilterExpr\",[]],[\"app\",{sourceInterval:[252,272]},\"PropertiesSelectExpr\",[]]]],FilterWithSelectExpr:[\"define\",{sourceInterval:[284,343]},null,[],[\"seq\",{sourceInterval:[307,343]},[\"app\",{sourceInterval:[307,317]},\"FilterExpr\",[]],[\"terminal\",{sourceInterval:[318,322]},\"->\"],[\"app\",{sourceInterval:[323,343]},\"PropertiesSelectExpr\",[]]]],FilterWithAggregatedSelectExpr:[\"define\",{sourceInterval:[351,425]},null,[],[\"seq\",{sourceInterval:[384,425]},[\"app\",{sourceInterval:[384,394]},\"FilterExpr\",[]],[\"terminal\",{sourceInterval:[395,399]},\"->\"],[\"app\",{sourceInterval:[400,425]},\"AggregatedSelectionClause\",[]]]],FilterWithGroupedAggregedSelectExpr:[\"define\",{sourceInterval:[437,547]},null,[],[\"seq\",{sourceInterval:[475,547]},[\"app\",{sourceInterval:[475,485]},\"FilterExpr\",[]],[\"terminal\",{sourceInterval:[486,490]},\"->\"],[\"app\",{sourceInterval:[491,516]},\"AggregatedSelectionClause\",[]],[\"app\",{sourceInterval:[517,526]},\"groupedBy\",[]],[\"app\",{sourceInterval:[527,547]},\"PropertiesSelectExpr\",[]]]],FilterExpr:[\"define\",{sourceInterval:[555,574]},null,[],[\"app\",{sourceInterval:[568,574]},\"BoolOr\",[]]],BoolOr_or:[\"define\",{sourceInterval:[604,636]},null,[],[\"seq\",{sourceInterval:[604,630]},[\"app\",{sourceInterval:[604,610]},\"BoolOr\",[]],[\"app\",{sourceInterval:[611,622]},\"orOperation\",[]],[\"app\",{sourceInterval:[623,630]},\"BoolAnd\",[]]]],BoolOr:[\"define\",{sourceInterval:[586,655]},null,[],[\"alt\",{sourceInterval:[604,655]},[\"app\",{sourceInterval:[604,630]},\"BoolOr_or\",[]],[\"app\",{sourceInterval:[648,655]},\"BoolAnd\",[]]]],BoolAnd_and:[\"define\",{sourceInterval:[683,717]},null,[],[\"seq\",{sourceInterval:[683,710]},[\"app\",{sourceInterval:[683,690]},\"BoolAnd\",[]],[\"app\",{sourceInterval:[691,703]},\"andOperation\",[]],[\"app\",{sourceInterval:[704,710]},\"PriExp\",[]]]],BoolAnd:[\"define\",{sourceInterval:[663,735]},null,[],[\"alt\",{sourceInterval:[683,735]},[\"app\",{sourceInterval:[683,710]},\"BoolAnd_and\",[]],[\"app\",{sourceInterval:[729,735]},\"PriExp\",[]]]],PriExp_paren:[\"define\",{sourceInterval:[770,797]},null,[],[\"seq\",{sourceInterval:[770,788]},[\"terminal\",{sourceInterval:[770,773]},\"(\"],[\"app\",{sourceInterval:[774,784]},\"FilterExpr\",[]],[\"terminal\",{sourceInterval:[785,788]},\")\"]]],PriExp:[\"define\",{sourceInterval:[751,841]},null,[],[\"alt\",{sourceInterval:[770,841]},[\"app\",{sourceInterval:[770,788]},\"PriExp_paren\",[]],[\"app\",{sourceInterval:[809,822]},\"ComparisonExp\",[]],[\"app\",{sourceInterval:[834,841]},\"NotExpr\",[]]]],ComparisonExp:[\"define\",{sourceInterval:[849,1234]},null,[],[\"alt\",{sourceInterval:[865,1234]},[\"app\",{sourceInterval:[865,877]},\"EqualityExpr\",[]],[\"app\",{sourceInterval:[880,892]},\"LessThanExpr\",[]],[\"app\",{sourceInterval:[895,907]},\"MoreThanExpr\",[]],[\"app\",{sourceInterval:[910,929]},\"LessThanOrEqualExpr\",[]],[\"app\",{sourceInterval:[932,951]},\"MoreThanOrEqualExpr\",[]],[\"app\",{sourceInterval:[954,969]},\"NonEqualityExpr\",[]],[\"app\",{sourceInterval:[982,1004]},\"PropertiesEqualityExpr\",[]],[\"app\",{sourceInterval:[1007,1029]},\"PropertiesLessThanExpr\",[]],[\"app\",{sourceInterval:[1032,1054]},\"PropertiesMoreThanExpr\",[]],[\"app\",{sourceInterval:[1057,1086]},\"PropertiesLessThanOrEqualExpr\",[]],[\"app\",{sourceInterval:[1099,1128]},\"PropertiesMoreThanOrEqualExpr\",[]],[\"app\",{sourceInterval:[1131,1156]},\"PropertiesNonEqualityExpr\",[]],[\"app\",{sourceInterval:[1169,1183]},\"StartsWithExpr\",[]],[\"app\",{sourceInterval:[1186,1198]},\"EndsWithExpr\",[]],[\"app\",{sourceInterval:[1201,1207]},\"InExpr\",[]],[\"app\",{sourceInterval:[1210,1219]},\"NotInExpr\",[]],[\"app\",{sourceInterval:[1222,1234]},\"exactElement\",[]]]],NotExpr:[\"define\",{sourceInterval:[1242,1283]},null,[],[\"seq\",{sourceInterval:[1252,1283]},[\"app\",{sourceInterval:[1252,1264]},\"notOperation\",[]],[\"terminal\",{sourceInterval:[1265,1268]},\"(\"],[\"app\",{sourceInterval:[1269,1279]},\"FilterExpr\",[]],[\"terminal\",{sourceInterval:[1280,1283]},\")\"]]],EqualityExpr:[\"define\",{sourceInterval:[1291,1381]},null,[],[\"alt\",{sourceInterval:[1306,1381]},[\"seq\",{sourceInterval:[1306,1342]},[\"app\",{sourceInterval:[1306,1322]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[1323,1326]},\"=\"],[\"app\",{sourceInterval:[1327,1342]},\"expressionConst\",[]]],[\"seq\",{sourceInterval:[1345,1381]},[\"app\",{sourceInterval:[1345,1360]},\"expressionConst\",[]],[\"terminal\",{sourceInterval:[1361,1364]},\"=\"],[\"app\",{sourceInterval:[1365,1381]},\"propertySequence\",[]]]]],LessThanExpr:[\"define\",{sourceInterval:[1393,1483]},null,[],[\"alt\",{sourceInterval:[1408,1483]},[\"seq\",{sourceInterval:[1408,1444]},[\"app\",{sourceInterval:[1408,1424]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[1425,1428]},\"<\"],[\"app\",{sourceInterval:[1429,1444]},\"expressionConst\",[]]],[\"seq\",{sourceInterval:[1447,1483]},[\"app\",{sourceInterval:[1447,1462]},\"expressionConst\",[]],[\"terminal\",{sourceInterval:[1463,1466]},\">\"],[\"app\",{sourceInterval:[1467,1483]},\"propertySequence\",[]]]]],MoreThanExpr:[\"define\",{sourceInterval:[1495,1585]},null,[],[\"alt\",{sourceInterval:[1510,1585]},[\"seq\",{sourceInterval:[1510,1546]},[\"app\",{sourceInterval:[1510,1526]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[1527,1530]},\">\"],[\"app\",{sourceInterval:[1531,1546]},\"expressionConst\",[]]],[\"seq\",{sourceInterval:[1549,1585]},[\"app\",{sourceInterval:[1549,1564]},\"expressionConst\",[]],[\"terminal\",{sourceInterval:[1565,1568]},\"<\"],[\"app\",{sourceInterval:[1569,1585]},\"propertySequence\",[]]]]],LessThanOrEqualExpr:[\"define\",{sourceInterval:[1597,1696]},null,[],[\"alt\",{sourceInterval:[1619,1696]},[\"seq\",{sourceInterval:[1619,1656]},[\"app\",{sourceInterval:[1619,1635]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[1636,1640]},\"<=\"],[\"app\",{sourceInterval:[1641,1656]},\"expressionConst\",[]]],[\"seq\",{sourceInterval:[1659,1696]},[\"app\",{sourceInterval:[1659,1674]},\"expressionConst\",[]],[\"terminal\",{sourceInterval:[1675,1679]},\">=\"],[\"app\",{sourceInterval:[1680,1696]},\"propertySequence\",[]]]]],MoreThanOrEqualExpr:[\"define\",{sourceInterval:[1708,1807]},null,[],[\"alt\",{sourceInterval:[1730,1807]},[\"seq\",{sourceInterval:[1730,1767]},[\"app\",{sourceInterval:[1730,1746]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[1747,1751]},\">=\"],[\"app\",{sourceInterval:[1752,1767]},\"expressionConst\",[]]],[\"seq\",{sourceInterval:[1770,1807]},[\"app\",{sourceInterval:[1770,1785]},\"expressionConst\",[]],[\"terminal\",{sourceInterval:[1786,1790]},\"<=\"],[\"app\",{sourceInterval:[1791,1807]},\"propertySequence\",[]]]]],NonEqualityExpr:[\"define\",{sourceInterval:[1815,1926]},null,[],[\"alt\",{sourceInterval:[1833,1926]},[\"seq\",{sourceInterval:[1833,1878]},[\"app\",{sourceInterval:[1833,1849]},\"propertySequence\",[]],[\"app\",{sourceInterval:[1850,1862]},\"nonEqualSign\",[]],[\"app\",{sourceInterval:[1863,1878]},\"expressionConst\",[]]],[\"seq\",{sourceInterval:[1881,1926]},[\"app\",{sourceInterval:[1881,1896]},\"expressionConst\",[]],[\"app\",{sourceInterval:[1897,1909]},\"nonEqualSign\",[]],[\"app\",{sourceInterval:[1910,1926]},\"propertySequence\",[]]]]],PropertiesEqualityExpr:[\"define\",{sourceInterval:[1934,1996]},null,[],[\"seq\",{sourceInterval:[1959,1996]},[\"app\",{sourceInterval:[1959,1975]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[1976,1979]},\"=\"],[\"app\",{sourceInterval:[1980,1996]},\"propertySequence\",[]]]],PropertiesLessThanExpr:[\"define\",{sourceInterval:[2004,2066]},null,[],[\"seq\",{sourceInterval:[2029,2066]},[\"app\",{sourceInterval:[2029,2045]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[2046,2049]},\"<\"],[\"app\",{sourceInterval:[2050,2066]},\"propertySequence\",[]]]],PropertiesMoreThanExpr:[\"define\",{sourceInterval:[2074,2136]},null,[],[\"seq\",{sourceInterval:[2099,2136]},[\"app\",{sourceInterval:[2099,2115]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[2116,2119]},\">\"],[\"app\",{sourceInterval:[2120,2136]},\"propertySequence\",[]]]],PropertiesLessThanOrEqualExpr:[\"define\",{sourceInterval:[2144,2214]},null,[],[\"seq\",{sourceInterval:[2176,2214]},[\"app\",{sourceInterval:[2176,2192]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[2193,2197]},\"<=\"],[\"app\",{sourceInterval:[2198,2214]},\"propertySequence\",[]]]],PropertiesMoreThanOrEqualExpr:[\"define\",{sourceInterval:[2222,2292]},null,[],[\"seq\",{sourceInterval:[2254,2292]},[\"app\",{sourceInterval:[2254,2270]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[2271,2275]},\">=\"],[\"app\",{sourceInterval:[2276,2292]},\"propertySequence\",[]]]],PropertiesNonEqualityExpr:[\"define\",{sourceInterval:[2300,2374]},null,[],[\"seq\",{sourceInterval:[2328,2374]},[\"app\",{sourceInterval:[2328,2344]},\"propertySequence\",[]],[\"app\",{sourceInterval:[2345,2357]},\"nonEqualSign\",[]],[\"app\",{sourceInterval:[2358,2374]},\"propertySequence\",[]]]],StartsWithExpr:[\"define\",{sourceInterval:[2382,2440]},null,[],[\"seq\",{sourceInterval:[2399,2440]},[\"app\",{sourceInterval:[2399,2415]},\"propertySequence\",[]],[\"app\",{sourceInterval:[2416,2424]},\"likeWord\",[]],[\"app\",{sourceInterval:[2425,2440]},\"startsWithConst\",[]]]],EndsWithExpr:[\"define\",{sourceInterval:[2448,2502]},null,[],[\"seq\",{sourceInterval:[2463,2502]},[\"app\",{sourceInterval:[2463,2479]},\"propertySequence\",[]],[\"app\",{sourceInterval:[2480,2488]},\"likeWord\",[]],[\"app\",{sourceInterval:[2489,2502]},\"endsWithConst\",[]]]],InExpr:[\"define\",{sourceInterval:[2510,2568]},null,[],[\"seq\",{sourceInterval:[2519,2568]},[\"app\",{sourceInterval:[2519,2535]},\"propertySequence\",[]],[\"app\",{sourceInterval:[2536,2542]},\"inWord\",[]],[\"terminal\",{sourceInterval:[2543,2546]},\"[\"],[\"app\",{sourceInterval:[2547,2564]},\"ConstantsListExpr\",[]],[\"terminal\",{sourceInterval:[2565,2568]},\"]\"]]],NotInExpr:[\"define\",{sourceInterval:[2576,2645]},null,[],[\"seq\",{sourceInterval:[2588,2645]},[\"app\",{sourceInterval:[2588,2604]},\"propertySequence\",[]],[\"app\",{sourceInterval:[2605,2612]},\"notWord\",[]],[\"app\",{sourceInterval:[2613,2619]},\"inWord\",[]],[\"terminal\",{sourceInterval:[2620,2623]},\"[\"],[\"app\",{sourceInterval:[2624,2641]},\"ConstantsListExpr\",[]],[\"terminal\",{sourceInterval:[2642,2645]},\"]\"]]],AggregatedSelectionWithGroups:[\"define\",{sourceInterval:[2653,2741]},null,[],[\"seq\",{sourceInterval:[2685,2741]},[\"app\",{sourceInterval:[2685,2710]},\"AggregatedSelectionClause\",[]],[\"app\",{sourceInterval:[2711,2720]},\"groupedBy\",[]],[\"app\",{sourceInterval:[2721,2741]},\"PropertiesSelectExpr\",[]]]],AggregatedSelectionClause:[\"define\",{sourceInterval:[2749,2820]},null,[],[\"alt\",{sourceInterval:[2777,2820]},[\"app\",{sourceInterval:[2777,2796]},\"AggregatedFuncsExpr\",[]],[\"app\",{sourceInterval:[2799,2820]},\"AnyAggregatedFuncExpr\",[]]]],AggregatedFuncsExpr:[\"define\",{sourceInterval:[2828,2900]},null,[],[\"seq\",{sourceInterval:[2850,2900]},[\"app\",{sourceInterval:[2850,2871]},\"AnyAggregatedFuncExpr\",[]],[\"star\",{sourceInterval:[2872,2900]},[\"seq\",{sourceInterval:[2873,2898]},[\"terminal\",{sourceInterval:[2873,2876]},\",\"],[\"app\",{sourceInterval:[2877,2898]},\"AnyAggregatedFuncExpr\",[]]]]]],AnyAggregatedFuncExpr:[\"define\",{sourceInterval:[2908,2976]},null,[],[\"alt\",{sourceInterval:[2932,2976]},[\"app\",{sourceInterval:[2932,2955]},\"AggregatedNamedFuncExpr\",[]],[\"app\",{sourceInterval:[2958,2976]},\"AggregatedFuncExpr\",[]]]],AggregatedNamedFuncExpr:[\"define\",{sourceInterval:[2984,3058]},null,[],[\"seq\",{sourceInterval:[3010,3058]},[\"app\",{sourceInterval:[3010,3028]},\"AggregatedFuncExpr\",[]],[\"app\",{sourceInterval:[3029,3035]},\"asWord\",[]],[\"app\",{sourceInterval:[3036,3058]},\"propertyNameIdentifier\",[]]]],AggregatedFuncExpr:[\"define\",{sourceInterval:[3066,3186]},null,[],[\"alt\",{sourceInterval:[3087,3186]},[\"app\",{sourceInterval:[3087,3106]},\"AggregatedCountExpr\",[]],[\"app\",{sourceInterval:[3109,3126]},\"AggregatedSumExpr\",[]],[\"app\",{sourceInterval:[3129,3146]},\"AggregatedMinExpr\",[]],[\"app\",{sourceInterval:[3149,3166]},\"AggregatedMaxExpr\",[]],[\"app\",{sourceInterval:[3169,3186]},\"AggregatedAvgExpr\",[]]]],AggregatedCountExpr:[\"define\",{sourceInterval:[3194,3230]},null,[],[\"seq\",{sourceInterval:[3216,3230]},[\"app\",{sourceInterval:[3216,3225]},\"countWord\",[]],[\"terminal\",{sourceInterval:[3226,3230]},\"()\"]]],AggregatedSumExpr:[\"define\",{sourceInterval:[3238,3290]},null,[],[\"seq\",{sourceInterval:[3258,3290]},[\"app\",{sourceInterval:[3258,3265]},\"sumWord\",[]],[\"terminal\",{sourceInterval:[3266,3269]},\"(\"],[\"app\",{sourceInterval:[3270,3286]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[3287,3290]},\")\"]]],AggregatedMinExpr:[\"define\",{sourceInterval:[3298,3350]},null,[],[\"seq\",{sourceInterval:[3318,3350]},[\"app\",{sourceInterval:[3318,3325]},\"minWord\",[]],[\"terminal\",{sourceInterval:[3326,3329]},\"(\"],[\"app\",{sourceInterval:[3330,3346]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[3347,3350]},\")\"]]],AggregatedMaxExpr:[\"define\",{sourceInterval:[3358,3410]},null,[],[\"seq\",{sourceInterval:[3378,3410]},[\"app\",{sourceInterval:[3378,3385]},\"maxWord\",[]],[\"terminal\",{sourceInterval:[3386,3389]},\"(\"],[\"app\",{sourceInterval:[3390,3406]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[3407,3410]},\")\"]]],AggregatedAvgExpr:[\"define\",{sourceInterval:[3418,3470]},null,[],[\"seq\",{sourceInterval:[3438,3470]},[\"app\",{sourceInterval:[3438,3445]},\"avgWord\",[]],[\"terminal\",{sourceInterval:[3446,3449]},\"(\"],[\"app\",{sourceInterval:[3450,3466]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[3467,3470]},\")\"]]],PropertiesSelectExpr:[\"define\",{sourceInterval:[3478,3540]},null,[],[\"alt\",{sourceInterval:[3501,3540]},[\"app\",{sourceInterval:[3501,3515]},\"PropertiesExpr\",[]],[\"app\",{sourceInterval:[3518,3540]},\"PropertyIdentifierExpr\",[]]]],PropertiesExpr:[\"define\",{sourceInterval:[3548,3617]},null,[],[\"seq\",{sourceInterval:[3565,3617]},[\"app\",{sourceInterval:[3565,3587]},\"PropertyIdentifierExpr\",[]],[\"star\",{sourceInterval:[3588,3617]},[\"seq\",{sourceInterval:[3589,3615]},[\"terminal\",{sourceInterval:[3589,3592]},\",\"],[\"app\",{sourceInterval:[3593,3615]},\"PropertyIdentifierExpr\",[]]]]]],ConstantsListExpr:[\"define\",{sourceInterval:[3625,3683]},null,[],[\"seq\",{sourceInterval:[3645,3683]},[\"app\",{sourceInterval:[3645,3660]},\"expressionConst\",[]],[\"star\",{sourceInterval:[3661,3683]},[\"seq\",{sourceInterval:[3662,3681]},[\"terminal\",{sourceInterval:[3662,3665]},\",\"],[\"app\",{sourceInterval:[3666,3681]},\"expressionConst\",[]]]]]],PropertyIdentifierExpr:[\"define\",{sourceInterval:[3691,3770]},null,[],[\"alt\",{sourceInterval:[3725,3770]},[\"app\",{sourceInterval:[3725,3742]},\"NamedPropertyExpr\",[]],[\"app\",{sourceInterval:[3754,3770]},\"propertySequence\",[]]]],NamedPropertyExpr:[\"define\",{sourceInterval:[3778,3844]},null,[],[\"seq\",{sourceInterval:[3798,3844]},[\"app\",{sourceInterval:[3798,3814]},\"propertySequence\",[]],[\"app\",{sourceInterval:[3815,3821]},\"asWord\",[]],[\"app\",{sourceInterval:[3822,3844]},\"propertyNameIdentifier\",[]]]],propertyNameIdentifier:[\"define\",{sourceInterval:[3852,3900]},null,[],[\"plus\",{sourceInterval:[3877,3900]},[\"alt\",{sourceInterval:[3878,3898]},[\"app\",{sourceInterval:[3878,3884]},\"letter\",[]],[\"app\",{sourceInterval:[3887,3892]},\"digit\",[]],[\"terminal\",{sourceInterval:[3895,3898]},\"_\"]]]],propertySequence:[\"define\",{sourceInterval:[3908,3952]},null,[],[\"alt\",{sourceInterval:[3927,3952]},[\"app\",{sourceInterval:[3927,3935]},\"property\",[]],[\"app\",{sourceInterval:[3938,3952]},\"directProperty\",[]]]],property_ofPropertySequence:[\"define\",{sourceInterval:[4002,4062]},null,[],[\"seq\",{sourceInterval:[4002,4041]},[\"app\",{sourceInterval:[4002,4018]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[4019,4022]},\".\"],[\"app\",{sourceInterval:[4023,4041]},\"categoryOrProperty\",[]]]],property_ofDirectAnyPropertySequence:[\"define\",{sourceInterval:[4074,4152]},null,[],[\"seq\",{sourceInterval:[4074,4122]},[\"app\",{sourceInterval:[4074,4099]},\"directAnyPropertySequence\",[]],[\"terminal\",{sourceInterval:[4100,4103]},\".\"],[\"app\",{sourceInterval:[4104,4122]},\"categoryOrProperty\",[]]]],property_ofDirectAny:[\"define\",{sourceInterval:[4164,4218]},null,[],[\"seq\",{sourceInterval:[4164,4204]},[\"app\",{sourceInterval:[4164,4181]},\"directAnyProperty\",[]],[\"terminal\",{sourceInterval:[4182,4185]},\".\"],[\"app\",{sourceInterval:[4186,4204]},\"categoryOrProperty\",[]]]],property:[\"define\",{sourceInterval:[3980,4218]},null,[],[\"alt\",{sourceInterval:[4002,4218]},[\"app\",{sourceInterval:[4002,4041]},\"property_ofPropertySequence\",[]],[\"app\",{sourceInterval:[4074,4122]},\"property_ofDirectAnyPropertySequence\",[]],[\"app\",{sourceInterval:[4164,4204]},\"property_ofDirectAny\",[]]]],directProperty_ofCategory:[\"define\",{sourceInterval:[4273,4327]},null,[],[\"seq\",{sourceInterval:[4273,4314]},[\"app\",{sourceInterval:[4273,4291]},\"categoryOrProperty\",[]],[\"terminal\",{sourceInterval:[4292,4295]},\".\"],[\"app\",{sourceInterval:[4296,4314]},\"categoryOrProperty\",[]]]],directProperty_ofAnyProperty:[\"define\",{sourceInterval:[4339,4389]},null,[],[\"seq\",{sourceInterval:[4339,4373]},[\"app\",{sourceInterval:[4339,4350]},\"anyProperty\",[]],[\"terminal\",{sourceInterval:[4351,4354]},\".\"],[\"app\",{sourceInterval:[4355,4373]},\"categoryOrProperty\",[]]]],directProperty:[\"define\",{sourceInterval:[4246,4389]},null,[],[\"alt\",{sourceInterval:[4273,4389]},[\"app\",{sourceInterval:[4273,4314]},\"directProperty_ofCategory\",[]],[\"app\",{sourceInterval:[4339,4373]},\"directProperty_ofAnyProperty\",[]]]],directAnyPropertySequence:[\"define\",{sourceInterval:[4405,4465]},null,[],[\"seq\",{sourceInterval:[4433,4465]},[\"app\",{sourceInterval:[4433,4449]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[4450,4453]},\".\"],[\"app\",{sourceInterval:[4454,4465]},\"anyProperty\",[]]]],directAnyProperty_sequenced:[\"define\",{sourceInterval:[4501,4546]},null,[],[\"seq\",{sourceInterval:[4501,4534]},[\"app\",{sourceInterval:[4501,4518]},\"directAnyProperty\",[]],[\"terminal\",{sourceInterval:[4519,4522]},\".\"],[\"app\",{sourceInterval:[4523,4534]},\"anyProperty\",[]]]],directAnyProperty_ofCategory:[\"define\",{sourceInterval:[4558,4605]},null,[],[\"seq\",{sourceInterval:[4558,4592]},[\"app\",{sourceInterval:[4558,4576]},\"categoryOrProperty\",[]],[\"terminal\",{sourceInterval:[4577,4580]},\".\"],[\"app\",{sourceInterval:[4581,4592]},\"anyProperty\",[]]]],directAnyProperty_ofAny:[\"define\",{sourceInterval:[4617,4652]},null,[],[\"seq\",{sourceInterval:[4617,4644]},[\"app\",{sourceInterval:[4617,4628]},\"anyProperty\",[]],[\"terminal\",{sourceInterval:[4629,4632]},\".\"],[\"app\",{sourceInterval:[4633,4644]},\"anyProperty\",[]]]],directAnyProperty:[\"define\",{sourceInterval:[4481,4652]},null,[],[\"alt\",{sourceInterval:[4501,4652]},[\"app\",{sourceInterval:[4501,4534]},\"directAnyProperty_sequenced\",[]],[\"app\",{sourceInterval:[4558,4592]},\"directAnyProperty_ofCategory\",[]],[\"app\",{sourceInterval:[4617,4644]},\"directAnyProperty_ofAny\",[]]]],exactElement_ofPropertySequence:[\"define\",{sourceInterval:[4683,4724]},null,[],[\"seq\",{sourceInterval:[4683,4703]},[\"app\",{sourceInterval:[4683,4699]},\"propertySequence\",[]],[\"terminal\",{sourceInterval:[4700,4703]},\"!\"]]],exactElement_ofCategory:[\"define\",{sourceInterval:[4736,4771]},null,[],[\"seq\",{sourceInterval:[4736,4758]},[\"app\",{sourceInterval:[4736,4754]},\"categoryOrProperty\",[]],[\"terminal\",{sourceInterval:[4755,4758]},\"!\"]]],exactElement:[\"define\",{sourceInterval:[4668,4771]},null,[],[\"alt\",{sourceInterval:[4683,4771]},[\"app\",{sourceInterval:[4683,4703]},\"exactElement_ofPropertySequence\",[]],[\"app\",{sourceInterval:[4736,4758]},\"exactElement_ofCategory\",[]]]],categoryOrProperty_inBrackets:[\"define\",{sourceInterval:[4844,4878]},null,[],[\"seq\",{sourceInterval:[4844,4865]},[\"terminal\",{sourceInterval:[4844,4847]},\"[\"],[\"app\",{sourceInterval:[4848,4861]},\"identificator\",[]],[\"terminal\",{sourceInterval:[4862,4865]},\"]\"]]],categoryOrProperty_value:[\"define\",{sourceInterval:[4891,4905]},null,[],[\"plus\",{sourceInterval:[4891,4897]},[\"app\",{sourceInterval:[4891,4896]},\"alnum\",[]]]],categoryOrProperty:[\"define\",{sourceInterval:[4783,4905]},\"element category or property\",[],[\"alt\",{sourceInterval:[4844,4905]},[\"app\",{sourceInterval:[4844,4865]},\"categoryOrProperty_inBrackets\",[]],[\"app\",{sourceInterval:[4891,4897]},\"categoryOrProperty_value\",[]]]],groupedBy:[\"define\",{sourceInterval:[4913,4952]},null,[],[\"app\",{sourceInterval:[4925,4952]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[4941,4951]},\"group by\"]]]],avgWord:[\"define\",{sourceInterval:[4960,4992]},null,[],[\"app\",{sourceInterval:[4970,4992]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[4986,4991]},\"avg\"]]]],maxWord:[\"define\",{sourceInterval:[5e3,5032]},null,[],[\"app\",{sourceInterval:[5010,5032]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[5026,5031]},\"max\"]]]],minWord:[\"define\",{sourceInterval:[5040,5072]},null,[],[\"app\",{sourceInterval:[5050,5072]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[5066,5071]},\"min\"]]]],sumWord:[\"define\",{sourceInterval:[5080,5112]},null,[],[\"app\",{sourceInterval:[5090,5112]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[5106,5111]},\"sum\"]]]],countWord:[\"define\",{sourceInterval:[5120,5156]},null,[],[\"app\",{sourceInterval:[5132,5156]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[5148,5155]},\"count\"]]]],asWord:[\"define\",{sourceInterval:[5164,5194]},null,[],[\"app\",{sourceInterval:[5173,5194]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[5189,5193]},\"as\"]]]],nonEqualSign:[\"define\",{sourceInterval:[5202,5228]},null,[],[\"alt\",{sourceInterval:[5217,5228]},[\"terminal\",{sourceInterval:[5217,5221]},\"<>\"],[\"terminal\",{sourceInterval:[5224,5228]},\"!=\"]]],andOperation:[\"define\",{sourceInterval:[5244,5279]},null,[],[\"alt\",{sourceInterval:[5259,5279]},[\"app\",{sourceInterval:[5259,5266]},\"andWord\",[]],[\"terminal\",{sourceInterval:[5269,5273]},\"&&\"],[\"terminal\",{sourceInterval:[5276,5279]},\"&\"]]],andWord:[\"define\",{sourceInterval:[5287,5319]},null,[],[\"app\",{sourceInterval:[5297,5319]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[5313,5318]},\"and\"]]]],orOperation:[\"define\",{sourceInterval:[5331,5364]},null,[],[\"alt\",{sourceInterval:[5345,5364]},[\"app\",{sourceInterval:[5345,5351]},\"orWord\",[]],[\"terminal\",{sourceInterval:[5354,5358]},\"||\"],[\"terminal\",{sourceInterval:[5361,5364]},\"|\"]]],orWord:[\"define\",{sourceInterval:[5372,5402]},null,[],[\"app\",{sourceInterval:[5381,5402]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[5397,5401]},\"or\"]]]],likeWord:[\"define\",{sourceInterval:[5410,5444]},null,[],[\"app\",{sourceInterval:[5421,5444]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[5437,5443]},\"like\"]]]],notOperation:[\"define\",{sourceInterval:[5452,5480]},null,[],[\"alt\",{sourceInterval:[5467,5480]},[\"app\",{sourceInterval:[5467,5474]},\"notWord\",[]],[\"terminal\",{sourceInterval:[5477,5480]},\"!\"]]],notWord:[\"define\",{sourceInterval:[5488,5520]},null,[],[\"app\",{sourceInterval:[5498,5520]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[5514,5519]},\"not\"]]]],inWord:[\"define\",{sourceInterval:[5528,5558]},null,[],[\"app\",{sourceInterval:[5537,5558]},\"caseInsensitive\",[[\"terminal\",{sourceInterval:[5553,5557]},\"in\"]]]],anyProperty:[\"define\",{sourceInterval:[5570,5587]},null,[],[\"terminal\",{sourceInterval:[5584,5587]},\"*\"]],identificator:[\"define\",{sourceInterval:[5599,5631]},null,[],[\"plus\",{sourceInterval:[5615,5631]},[\"seq\",{sourceInterval:[5616,5629]},[\"not\",{sourceInterval:[5616,5620]},[\"terminal\",{sourceInterval:[5617,5620]},\"]\"]],[\"not\",{sourceInterval:[5621,5625]},[\"terminal\",{sourceInterval:[5622,5625]},\"[\"]],[\"app\",{sourceInterval:[5626,5629]},\"any\",[]]]]],expressionConst:[\"define\",{sourceInterval:[5643,5679]},null,[],[\"alt\",{sourceInterval:[5661,5679]},[\"app\",{sourceInterval:[5661,5670]},\"textConst\",[]],[\"app\",{sourceInterval:[5673,5679]},\"number\",[]]]],startsWithConst:[\"define\",{sourceInterval:[5687,5738]},null,[],[\"seq\",{sourceInterval:[5714,5738]},[\"terminal\",{sourceInterval:[5714,5718]},'\"'],[\"app\",{sourceInterval:[5719,5732]},\"likeTextValue\",[]],[\"terminal\",{sourceInterval:[5733,5738]},'%\"']]],endsWithConst:[\"define\",{sourceInterval:[5746,5795]},null,[],[\"seq\",{sourceInterval:[5771,5795]},[\"terminal\",{sourceInterval:[5771,5776]},'\"%'],[\"app\",{sourceInterval:[5777,5790]},\"likeTextValue\",[]],[\"terminal\",{sourceInterval:[5791,5795]},'\"']]],textConst:[\"define\",{sourceInterval:[5807,5867]},\"target text value\",[],[\"seq\",{sourceInterval:[5848,5867]},[\"terminal\",{sourceInterval:[5848,5852]},'\"'],[\"app\",{sourceInterval:[5853,5862]},\"textValue\",[]],[\"terminal\",{sourceInterval:[5863,5867]},'\"']]],textValue:[\"define\",{sourceInterval:[5883,5904]},null,[],[\"star\",{sourceInterval:[5895,5904]},[\"app\",{sourceInterval:[5895,5903]},\"textChar\",[]]]],likeTextValue:[\"define\",{sourceInterval:[5912,5941]},null,[],[\"star\",{sourceInterval:[5928,5941]},[\"app\",{sourceInterval:[5928,5940]},\"likeTextChar\",[]]]],textChar:[\"define\",{sourceInterval:[5953,6002]},null,[],[\"alt\",{sourceInterval:[5973,6002]},[\"terminal\",{sourceInterval:[5973,5979]},'\\\\\"'],[\"seq\",{sourceInterval:[5991,6002]},[\"not\",{sourceInterval:[5992,5997]},[\"terminal\",{sourceInterval:[5993,5997]},'\"']],[\"app\",{sourceInterval:[5998,6001]},\"any\",[]]]]],likeTextChar:[\"define\",{sourceInterval:[6010,6088]},null,[],[\"alt\",{sourceInterval:[6034,6088]},[\"terminal\",{sourceInterval:[6034,6040]},'\\\\\"'],[\"terminal\",{sourceInterval:[6052,6057]},\"\\\\%\"],[\"seq\",{sourceInterval:[6069,6088]},[\"not\",{sourceInterval:[6070,6083]},[\"alt\",{sourceInterval:[6072,6082]},[\"terminal\",{sourceInterval:[6072,6076]},'\"'],[\"terminal\",{sourceInterval:[6079,6082]},\"%\"]]],[\"app\",{sourceInterval:[6084,6087]},\"any\",[]]]]],number:[\"define\",{sourceInterval:[6104,6158]},null,[],[\"alt\",{sourceInterval:[6120,6158]},[\"app\",{sourceInterval:[6120,6134]},\"positiveNumber\",[]],[\"app\",{sourceInterval:[6144,6158]},\"negativeNumber\",[]]]],negativeNumber:[\"define\",{sourceInterval:[6172,6207]},null,[],[\"seq\",{sourceInterval:[6189,6207]},[\"terminal\",{sourceInterval:[6189,6192]},\"-\"],[\"app\",{sourceInterval:[6193,6207]},\"positiveNumber\",[]]]],positiveNumber:[\"define\",{sourceInterval:[6219,6262]},null,[],[\"alt\",{sourceInterval:[6236,6262]},[\"app\",{sourceInterval:[6236,6246]},\"realNumber\",[]],[\"app\",{sourceInterval:[6249,6262]},\"integerNumber\",[]]]],integerNumber:[\"define\",{sourceInterval:[6276,6298]},null,[],[\"plus\",{sourceInterval:[6292,6298]},[\"app\",{sourceInterval:[6292,6297]},\"digit\",[]]]],realNumber:[\"define\",{sourceInterval:[6310,6340]},null,[],[\"seq\",{sourceInterval:[6323,6340]},[\"star\",{sourceInterval:[6323,6329]},[\"app\",{sourceInterval:[6323,6328]},\"digit\",[]]],[\"terminal\",{sourceInterval:[6330,6333]},\".\"],[\"plus\",{sourceInterval:[6334,6340]},[\"app\",{sourceInterval:[6334,6339]},\"digit\",[]]]]]}]);jt.exports=In});var Tn={};yr(Tn,{filterElements:()=>Fn});var lt=xr(Gt());var nt=(r,e)=>{if(r.length>e)throw new Error(\"Template categories count should not exceed target categories array\");let t=[];return he(t,[],r,0,e),t.sort(Ht)},se=(r,e)=>{let t=[];for(let n=e;n>=r.length;--n)t=t.concat(nt(r,n).sort(Ht));return t},he=(r,e,t,n,s)=>{if(e.length===s){n===t.length&&r.push(e);return}if(n<t.length&&t[n]!==\"*\"){e.push(t[n]),he(r,e,t,n+1,s);return}if(n>=t.length){e.push(\"*\"),he(r,e,t,n,s);return}if(t[n]===\"*\"){let i=s-e.length;for(let o=2;o<i;++o){let l=[...e];for(let a=0;a<o;++a)l.push(\"*\");he(r,l,t,n+1,s)}e.push(\"*\"),he(r,e,t,n+1,s)}},Ht=(r,e)=>Ut(r)-Ut(e),Ut=r=>r.map((e,t)=>e===\"*\"?t:0).reduce((e,t)=>e+t,0);var ee=(r,e)=>{if(e.length>r.length)return!1;let t=nt(e,r.length);for(let n of t)if(yn(r,n))return!0;return!1},yn=(r,e)=>{for(let t=0;t<e.length;t++)if(e[t]!==\"*\"&&r[t]!==e[t])return!1;return!0};function Kt(r,e,t,n,s,i){if(r=$t(r),e=$t(e),t=t||1,i=i||72,r===e&&t===1)return n;let o=D,l=xn;var a=1;switch(e){case o.MILLIMETER:a=1/l[o.MILLIMETER];break;case o.CENTIMETER:a=1/l[o.CENTIMETER];break;case o.METER:a=1;break;case o.INCH:a=1/l[o.INCH];break;case o.FOOT:a=1/l[o.FOOT];break;case\"ft-and-fractional-in\":a=1/l[o.FOOT];break;case\"ft-and-decimal-in\":a=1/l[o.FOOT];break;case\"decimal-in\":a=1/l[o.INCH];break;case\"decimal-ft\":a=1/l[o.FOOT];break;case\"fractional-in\":a=1/l[o.INCH];break;case\"m-and-cm\":a=1;break;case o.POINT:a=1/l[o.INCH]*i;break}var p=1;switch(r){case o.MILLIMETER:p=l[o.MILLIMETER];break;case o.CENTIMETER:p=l[o.CENTIMETER];break;case o.METER:p=l[o.METER];break;case o.INCH:p=l[o.INCH];break;case o.FOOT:p=l[o.FOOT];break;case\"ft-and-fractional-in\":p=l[o.FOOT];break;case\"ft-and-decimal-in\":p=l[o.FOOT];break;case\"decimal-in\":p=l[o.INCH];break;case\"decimal-ft\":p=l[o.FOOT];break;case\"fractional-in\":p=l[o.INCH];break;case\"m-and-cm\":p=1;break;case o.POINT:p=l[o.INCH]/i;break}return s===\"square\"?n?n*Math.pow(a*p*t,2):0:s===\"cube\"?n?n*Math.pow(a*p*t,3):0:n?n*a*p*t:0}function $t(r){var e;switch(r=(e=r)===null||e===void 0?void 0:e.toLowerCase(),r){case\"meter\":case\"meters\":case\"m\":return D.METER;case\"foot\":case\"feet\":case\"ft\":return D.FOOT;case\"feet and inches\":case\"inch\":case\"inches\":case\"in\":return D.INCH;case\"centimeter\":case\"centimeters\":case\"cm\":return D.CENTIMETER;case\"millimeter\":case\"millimeters\":case\"mm\":return D.MILLIMETER;case\"point\":case\"points\":case\"pt\":return D.POINT;default:return r}}var D={METER:\"m\",CENTIMETER:\"cm\",MILLIMETER:\"mm\",FOOT:\"ft\",INCH:\"in\",POINT:\"pt\"},xn={[D.METER]:1,[D.CENTIMETER]:.01,[D.MILLIMETER]:.001,[D.FOOT]:.3048,[D.INCH]:.0254,[D.POINT]:.0254/72};var me=(r,e)=>{let t=r.attribute;if(!t)return r.value;let n=bn(t);if(n===null)return r.value;let s=D[n.modelUnitType],i=An(r,e)?Kt(s,e.displayUnits,1,r.value*(n.factor||1),n.modificator):r.value;return En(i,e,t.precision)},En=(r,e,t)=>{let n=Sn(e,t);return new Number(r.toFixed(n)).valueOf()},Sn=(r,e)=>typeof r.displayUnitsPrecision==\"number\"?r.displayUnitsPrecision:e,An=(r,e)=>!!r.attribute&&(r.attribute.dataType===2||r.attribute.dataType===3)&&!!r.attribute.dataTypeContext&&e.displayUnits!==\"\",_n={centimeters:{modelUnitType:\"CENTIMETER\",system:\"metric\"},cubicCentimeters:{modelUnitType:\"CENTIMETER\",modificator:\"cube\",system:\"metric\"},cubicFeet:{modelUnitType:\"FOOT\",modificator:\"cube\",system:\"imperial\"},cubicInches:{modelUnitType:\"FOOT\",modificator:\"cube\",system:\"imperial\"},cubicMeters:{modelUnitType:\"METER\",modificator:\"cube\",system:\"metric\"},cubicMillimeters:{modelUnitType:\"MILLIMETER\",modificator:\"cube\",system:\"metric\"},decimeters:{modelUnitType:\"METER\",factor:10,system:\"metric\"},feet:{modelUnitType:\"FOOT\",system:\"imperial\"},inches:{modelUnitType:\"INCH\",system:\"imperial\"},kilometers:{modelUnitType:\"METER\",factor:1e3,system:\"metric\"},liters:{modelUnitType:\"METER\",modificator:\"cube\",factor:.001,system:\"metric\"},meters:{modelUnitType:\"METER\",system:\"metric\"},millimeters:{modelUnitType:\"MILLIMETER\",system:\"metric\"},squareCentimeters:{modelUnitType:\"CENTIMETER\",modificator:\"square\",system:\"metric\"},squareFeet:{modelUnitType:\"FOOT\",modificator:\"square\",system:\"imperial\"},squareInches:{modelUnitType:\"INCH\",modificator:\"square\",system:\"imperial\"},squareMeters:{modelUnitType:\"METER\",modificator:\"square\",system:\"metric\"},squareMillimeters:{modelUnitType:\"MILLIMETER\",modificator:\"square\",system:\"metric\"},feetFractionalInches:{modelUnitType:\"FOOT\",system:\"imperial\"},fractionalInches:{modelUnitType:\"INCH\",system:\"imperial\"},metersCentimeters:{modelUnitType:\"METER\",system:\"metric\"},stationingFeet:{modelUnitType:\"FOOT\",system:\"imperial\"},stationingMeters:{modelUnitType:\"METER\",system:\"metric\"}},bn=r=>{let e=r.dataTypeContext;if(!e||!e.startsWith(\"autodesk.unit.unit:\"))return null;let n=e.split(\":\")[1].split(\"-\")[0];return _n[n]||null};var H=(r,e,t=1e-5)=>Math.abs(r-e)<t,zt=(r,e,t=1e-5)=>r<e&&!H(r,e,t),Qt=(r,e,t=1e-5)=>r>e&&!H(r,e,t),Jt=(r,e,t=1e-5)=>r<e||H(r,e,t),Zt=(r,e,t=1e-5)=>r>e||H(r,e,t);var Pn=r=>r.type===\"number\",be=r=>typeof r.value==\"number\",Nn=r=>r.type===\"property-value\",On=r=>r.type===\"simple\"||r.type===\"number\",ot=r=>typeof r==\"string\",at=(r,e)=>(t,n)=>Pn(n)?(s,i)=>ee(i.categoriesList,t.categories)?se(t.categories,i.categoriesList.length).map(l=>i.getPropertyValue(t.propertyName,l)).filter(be).map(l=>me(l,s)).reduce((l,a)=>l||r(a,n.value,s),!1):!1:(s,i)=>{if(!ee(i.categoriesList,t.categories))return!1;let o=se(t.categories,i.categoriesList.length),l=s.stringCaseSensitive?n.value:n.value.toLocaleLowerCase();return o.map(a=>i.getPropertyValue(t.propertyName,a).value).filter(ot).map(a=>s.stringCaseSensitive?a:a.toLocaleLowerCase()).reduce((a,p)=>a||e(p,l),!1)},wn=(r,e)=>(t,n)=>(s,i)=>{if(!(ee(i.categoriesList,t.categories)&&ee(i.categoriesList,n.categories)))return!1;let o=se(t.categories,i.categoriesList.length).map(a=>i.getPropertyValue(t.propertyName,a)),l=se(n.categories,i.categoriesList.length).map(a=>i.getPropertyValue(n.propertyName,a));for(let a of o)for(let p of l){if(be(a)&&be(p)){let u=me(a,s),c=me(p,s);if(r(u,c,s))return!0}if(ot(a.value)&&ot(p.value)){let u=s.stringCaseSensitive?a.value:a.value.toLocaleLowerCase(),c=s.stringCaseSensitive?p.value:p.value.toLocaleLowerCase();if(e(u,c))return!0}}return!1},K=(r,e)=>(t,n,s)=>{let i=t.getPropertyDefinition(),o=s.getPropertyDefinition(),l=[i,o].find(c=>Nn(c)),a=[i,o].find(c=>On(c));if(a!==void 0)return at(r,e)(l,a);let p=l===i?o:i;return wn(r,e)(l,p)},Yt=K((r,e,t)=>H(r,e,t.tolerance),(r,e)=>r===e),Xt=K((r,e,t)=>zt(r,e,t.tolerance),(r,e)=>r<e),er=K((r,e,t)=>Jt(r,e,t.tolerance),(r,e)=>r<=e),tr=K((r,e,t)=>Qt(r,e,t.tolerance),(r,e)=>r>e),rr=K((r,e,t)=>Zt(r,e,t.tolerance),(r,e)=>r>=e),nr=(r,e,t)=>{let s=K((i,o,l)=>H(i,o,l.tolerance),(i,o)=>i===o)(r,e,t);return(i,o)=>!s(i,o)},sr={exactElement:r=>{let e=r.getPropertyDefinition();return(t,n)=>ee(n.categoriesList,e.categories)},EqualityExpr:Yt,PropertiesEqualityExpr:Yt,LessThanExpr:Xt,PropertiesLessThanExpr:Xt,LessThanOrEqualExpr:er,PropertiesLessThanOrEqualExpr:er,MoreThanExpr:tr,PropertiesMoreThanExpr:tr,MoreThanOrEqualExpr:rr,PropertiesMoreThanOrEqualExpr:rr,BoolAnd_and:(r,e,t)=>(n,s)=>r.compileFilter()(n,s)&&t.compileFilter()(n,s),BoolOr_or:(r,e,t)=>(n,s)=>r.compileFilter()(n,s)||t.compileFilter()(n,s),PriExp_paren:(r,e,t)=>(n,s)=>e.compileFilter()(n,s),NonEqualityExpr:nr,PropertiesNonEqualityExpr:nr,NotExpr:(r,e,t,n)=>(s,i)=>!t.compileFilter()(s,i),InExpr:(r,e,t,n,s)=>{let i=r.getPropertyDefinition(),o=n.getPropertyDefinition(),l=at((p,u,c)=>H(p,u,c.tolerance),(p,u)=>p===u),a=o.value.map(p=>typeof p==\"number\"?{type:\"number\",value:p}:{type:\"simple\",value:p}).map(p=>l(i,p));return(p,u)=>a.reduce((c,h)=>c||h(p,u),!1)},NotInExpr:(r,e,t,n,s,i)=>{let o=r.getPropertyDefinition(),l=s.getPropertyDefinition(),a=at((u,c,h)=>H(u,c,h.tolerance),(u,c)=>u===c),p=l.value.map(u=>typeof u==\"number\"?{type:\"number\",value:u}:{type:\"simple\",value:u}).map(u=>a(o,u));return(u,c)=>p.reduce((h,m)=>h&&!m(u,c),!0)},StartsWithExpr:K((r,e,t)=>!1,(r,e)=>r.startsWith(e)),EndsWithExpr:K((r,e,t)=>!1,(r,e)=>r.endsWith(e)),PropertiesSelectExpr:r=>(e,t)=>!0,AggregatedSelectionClause:r=>(e,t)=>!0,AggregatedSelectionWithGroups:(r,e,t)=>(n,s)=>!0,FilterWithSelectExpr:(r,e,t)=>r.compileFilter(),FilterWithAggregatedSelectExpr:(r,e,t)=>r.compileFilter(),FilterWithGroupedAggregedSelectExpr:(r,e,t,n,s)=>r.compileFilter()},ir={FilterExpr:r=>[],AggregatedSelectionClause:r=>[],FilterWithAggregatedSelectExpr:(r,e,t)=>[],FilterWithGroupedAggregedSelectExpr:(r,e,t,n,s)=>s.compileSelect(),FilterWithSelectExpr:(r,e,t)=>t.compileSelect(),AggregatedSelectionWithGroups:(r,e,t)=>t.compileSelect(),PropertiesExpr:(r,e,t)=>{let n=r.compileSelect(),s=t.children.flatMap(i=>i.compileSelect());return n.splice(1,0,...s),n},NamedPropertyExpr:(r,e,t)=>[{fun:ie(r),name:t.sourceString}],propertySequence:r=>[{fun:ie(r)}]},or={FilterWithSelectExpr:(r,e,t)=>[],FilterExpr:r=>[],PropertiesSelectExpr:r=>[],FilterWithAggregatedSelectExpr:(r,e,t)=>t.compileAggregate(),FilterWithGroupedAggregedSelectExpr:(r,e,t,n,s)=>t.compileAggregate(),AggregatedSelectionWithGroups:(r,e,t)=>r.compileAggregate(),AggregatedNamedFuncExpr:(r,e,t)=>[{...r.compileAggregate()[0],name:t.sourceString}],AggregatedFuncsExpr:(r,e,t)=>{let n=r.compileAggregate(),s=t.children.flatMap(i=>i.compileAggregate());return n.splice(1,0,...s),n},AggregatedCountExpr:(r,e)=>[{type:\"count\",elemValueFun:(t,n)=>1}],AggregatedSumExpr:(r,e,t,n)=>[{type:\"sum\",elemValueFun:ie(t)}],AggregatedMinExpr:(r,e,t,n)=>[{type:\"min\",elemValueFun:ie(t)}],AggregatedMaxExpr:(r,e,t,n)=>[{type:\"max\",elemValueFun:ie(t)}],AggregatedAvgExpr:(r,e,t,n)=>[{type:\"avg\",elemValueFun:ie(t)}]},st=(r,e)=>{let t=r.getPropertyDefinition(),n=e.getPropertyDefinition(),s=[...t.categories];return t.type===\"property-value\"&&s.push(t.propertyName),{type:\"property-value\",propertyName:n.value,categories:s}},it=r=>{let e=r.getPropertyDefinition();if(e.type===\"exact-category\")return e;let t=[...e.categories];return t.push(e.propertyName),{type:\"exact-category\",categories:t}},ar=r=>{let e=r.getPropertyDefinition();if(e.type===\"property-value\")return e;let t=[...e.categories];return{type:\"property-value\",propertyName:t.pop(),categories:t}},_e=(r,e)=>({type:\"simple\",value:typeof e==\"function\"?e(r.sourceString):r.sourceString}),lr={ConstantsListExpr:(r,e,t)=>{let n=r.getPropertyDefinition().value,s=t.children.map(i=>i.getPropertyDefinition().value);return s.push(n),{type:\"array\",value:s}},exactElement_ofCategory:(r,e)=>({type:\"exact-category\",categories:[r.getPropertyDefinition().value]}),categoryOrProperty_inBrackets:(r,e,t)=>_e(e),categoryOrProperty_value:r=>_e(r),exactElement_ofPropertySequence:(r,e)=>it(r),property_ofPropertySequence:(r,e,t)=>st(r,t),property_ofDirectAny:(r,e,t)=>st(r,t),property_ofDirectAnyPropertySequence:(r,e,t)=>st(r,t),directAnyProperty_ofCategory:(r,e,t)=>({type:\"exact-category\",categories:[r.getPropertyDefinition().value,\"*\"]}),directAnyPropertySequence:(r,e,t)=>it(r),directAnyProperty_sequenced:(r,e,t)=>{let s=[...it(r).categories];return s.push(\"*\"),{type:\"exact-category\",categories:s}},propertySequence:r=>ar(r),directProperty_ofCategory:(r,e,t)=>{let n=r.getPropertyDefinition(),s=t.getPropertyDefinition();return{type:\"exact-category\",categories:[n.value,s.value]}},directProperty_ofAnyProperty:(r,e,t)=>({type:\"exact-category\",categories:[\"*\",t.getPropertyDefinition().value]}),number:r=>({type:\"number\",value:parseFloat(r.sourceString)}),textConst:(r,e,t)=>e.getPropertyDefinition(),startsWithConst:(r,e,t)=>e.getPropertyDefinition(),endsWithConst:(r,e,t)=>e.getPropertyDefinition(),textValue:r=>_e(r,e=>e.replaceAll('\\\\\"','\"')),likeTextValue:r=>_e(r,e=>e.replaceAll('\\\\\"','\"').replaceAll(\"\\\\%\",\"%\"))},ie=r=>{let e=ar(r);return(t,n)=>ee(n.categoriesList,e.categories)?se(e.categories,n.categoriesList.length).map(i=>n.getPropertyValue(e.propertyName,i)).filter(i=>i.value!==void 0).map(i=>be(i)?me(i,t):i.value).find(i=>i):void 0};var Pe=class extends Error{shortMessage;constructor(e,t){super(e),this.shortMessage=t}};var Ne=class{semantics=lt.default.createSemantics();settings;constructor(e){this.settings=e||{tolerance:1e-5,stringCaseSensitive:!0,displayUnits:\"\",displayUnitsPrecision:\"\"},this.semantics.addOperation(\"getPropertyDefinition\",lr),this.semantics.addOperation(\"compileFilter\",sr),this.semantics.addOperation(\"compileSelect\",ir),this.semantics.addOperation(\"compileAggregate\",or)}createQuery(e){let t=lt.default.match(e);if(t.failed())throw new Pe(t.message,t.shortMessage);let n=this.semantics(t);return{filter:n.compileFilter().bind(null,this.settings),selectProperties:n.compileSelect(),aggregateProperties:n.compileAggregate()}}};var Oe=class{attributesCaseSensitive;attributesIdsByName=new Map;attributesById=new Map;internalRefsAttributes=new Set;constructor(e,t){this.attributesCaseSensitive=t;let n=-1,s=-1;e.enumAttributes((i,o)=>{this.attributesById.set(i,o);let l=t?o.name:o.name.toLocaleLowerCase(),a=this.attributesIdsByName.get(l)||[];a.push(i),this.attributesIdsByName.set(l,a),o.name===\"name\"&&o.category===\"__name__\"&&(n=i),o.name===\"instanceof_objid\"&&o.category===\"__instanceof__\"&&o.dataType===11&&(s=i),o.category===\"__internalref__\"&&o.dataType===11&&this.internalRefsAttributes.add(i)}),this.nameAttributeId=n,this.instanceOfAttributeId=s}nameAttributeId;instanceOfAttributeId;findAttributesIdsByName(e){let t=this.attributesCaseSensitive?e:e.toLocaleLowerCase();return this.attributesIdsByName.get(t)||[]}isInternalRefAttribute(e){return this.internalRefsAttributes.has(e)}findAttribute(e){return this.attributesById.get(e)}};var we=class{propertyValuesQueryFactory;categoryNodesDbIds;constructor(e,t){this.propertyValuesQueryFactory=t,this.categoryNodesDbIds=t.getCategories(e),this.categoriesList=this.categoryNodesDbIds.map(n=>this.getNodePropertyValue(n,this.propertyValuesQueryFactory.attributes.nameAttributeId).value)}categoriesList;getPropertyValue(e,t){if(!this.compareCategories(t))return{value:void 0,attribute:void 0};let n=this.categoryNodesDbIds[t.length-1],s=this.propertyValuesQueryFactory.attributes.findAttributesIdsByName(e).map(i=>this.getNodePropertyValue(n,i)).find(i=>i.value!==void 0);return{value:s?.value,attribute:s?.attribute}}compareCategories(e){for(let t=0;t<e.length;t++)if(e[t]!==\"*\"&&this.categoriesList[t]!==e[t])return!1;return!0}getNodePropertyValue(e,t){return this.propertyValuesQueryFactory.getNodePropertyValue(e,t)}};var cr=(r,e)=>{let t=[],n=r.findRootNodes();for(let s of n){let i=ur(s,r,e),o=r.getNodeNameAndChildren({dbId:s});o.length===1&&i===ur(o[0].dbId,r,e)?t.push(o[0].dbId):t.push(s)}return t},ur=(r,e,t)=>{let n=\"\";return e.enumObjectProperties(r,(s,i)=>{if(s===t.nameAttributeId)return n=e.getAttrValue(s,i),!0}),n};var Ce=class{propertyDatabase;attributes;rootNodes;modelBrowserExcludeRoot;propertiesValuesCache=new Map;constructor(e,t,n,s=!0,i=\"Model\"){if(this.propertyDatabase=e,this.attributes=t,this.rootNodes=n,this.modelBrowserExcludeRoot=s,!s)for(let o of n){let l={value:i,attribute:t.findAttribute(t.nameAttributeId)},a=new Map;a.set(t.nameAttributeId,l),this.propertiesValuesCache.set(o,a)}}getNodePropertyValue(e,t){let n=this.findCachedPropertyValue(e,t);if(n)return n;let s=this.attributes.findAttribute(t),i,o;if(this.propertyDatabase.enumObjectProperties(e,(a,p)=>{if(a===t)return i=this.propertyDatabase.getAttrValue(a,p),!0;i===void 0&&a===this.attributes.instanceOfAttributeId&&(o=this.propertyDatabase.getAttrValue(a,p))}),t!==this.attributes.nameAttributeId&&this.attributes.isInternalRefAttribute(t))if(typeof i==\"number\"){i=this.getNodePropertyValue(i,this.attributes.nameAttributeId).value;let a={value:i,attribute:s};return this.storeInCache(e,t,a),a}else{let a={value:void 0,attribute:s};return this.storeInCache(e,t,a),a}i===void 0&&typeof o==\"number\"&&(i=this.getNodePropertyValue(o,t).value),t===this.attributes.nameAttributeId&&(i=Ln(i));let l={value:i,attribute:s};return this.storeInCache(e,t,l),l}getCategories(e){let t=[],n=e;for(;n!==null&&this.rootNodes.findIndex(s=>s===n)<0;){let s=this.propertyDatabase.findParent(n);s!==null&&t.push(n),n=s}return this.modelBrowserExcludeRoot||t.splice(t.length,0,...this.rootNodes),t.reverse()}findCachedPropertyValue(e,t){let n=this.propertiesValuesCache.get(e);if(n)return n.get(t)}storeInCache(e,t,n){let s=this.propertiesValuesCache.get(e)||new Map;s.set(t,n),this.propertiesValuesCache.set(e,s)}},Cn=/^(?<name>.*) \\[\\d+\\]$/,Ln=r=>{if(typeof r!=\"string\")return r;let e=r.match(Cn);return e===null?r:e.groups.name};var oe=class{aggregatedValueQuery;settings;totalSum=0;constructor(e,t){this.aggregatedValueQuery=e,this.settings=t}dbIds=[];get name(){return this.aggregatedValueQuery.name}push(e,t){let n=this.aggregatedValueQuery.elemValueFun(this.settings,t);typeof n==\"number\"&&(this.dbIds.push(e),this.totalSum+=n)}compile(){return this.totalSum}};var Le=class{aggregatedValueQuery;sumFunction;constructor(e,t){this.aggregatedValueQuery=e,this.sumFunction=new oe(e,t)}get dbIds(){return this.sumFunction.dbIds}get name(){return this.aggregatedValueQuery.name}push(e,t){this.sumFunction.push(e,t)}compile(){return this.sumFunction.compile()/this.sumFunction.dbIds.length}};var Fe=class{name;totalCount=0;constructor(e){this.name=e}dbIds=[];push(e,t){this.dbIds.push(e),++this.totalCount}compile(){return this.totalCount}};var Te=class{aggregatedValueQuery;settings;totalMax=-1/0;constructor(e,t){this.aggregatedValueQuery=e,this.settings=t}dbIds=[];get name(){return this.aggregatedValueQuery.name}push(e,t){let n=this.aggregatedValueQuery.elemValueFun(this.settings,t);typeof n==\"number\"&&(this.dbIds.push(e),this.totalMax=Math.max(n,this.totalMax))}compile(){return this.totalMax}};var qe=class{aggregatedValueQuery;settings;totalMin=1/0;constructor(e,t){this.aggregatedValueQuery=e,this.settings=t}dbIds=[];get name(){return this.aggregatedValueQuery.name}push(e,t){let n=this.aggregatedValueQuery.elemValueFun(this.settings,t);typeof n==\"number\"&&(this.dbIds.push(e),this.totalMin=Math.min(n,this.totalMin))}compile(){return this.totalMin}};var pr=(r,e)=>{switch(r.type){case\"count\":return new Fe(r.name);case\"sum\":return new oe(r,e);case\"min\":return new qe(r,e);case\"max\":return new Te(r,e);case\"avg\":return new Le(r,e);default:throw new Error(`${r.type} is not supported yet`)}};var Re=class{settings;groupProperties;aggregatedProperties;aggregates=new Map;dbIds=new Map;constructor(e,t,n){this.settings=n,this.groupProperties=e.map((s,i)=>({...s,name:s.name||`$grp_col_${i+1}`})),this.aggregatedProperties=t.map((s,i)=>({...s,name:s.name||`$col_${i+1}`}))}push(e,t){let n=this.getGroupKey(t),s;if(this.aggregates.has(n))s=this.aggregates.get(n);else{s={functions:this.aggregatedProperties.map((o,l)=>pr({...o,name:o.name||`$col_${l+1}`},this.settings)),values:{}};for(let o of this.groupProperties)s.values[o.name]=o.fun(this.settings,t);this.aggregates.set(n,s)}for(let o of s.functions)o.push(e,t);let i=this.dbIds.get(n)||[];i.push(e),this.dbIds.set(n,i)}compile(){let e=[];for(let[t,n]of this.aggregates){let s={dbIds:this.dbIds.get(t),values:n.values};for(let i of n.functions)s.values[i.name]=i.compile();e.push(s)}return e}getColumns(){let e=this.aggregatedProperties.map(t=>t.name);return e.splice(e.length,0,...this.groupProperties.map(t=>t.name)),e}getGroupKey(e){return this.groupProperties.map(t=>`name=${t.name},value=${t.fun(this.settings,e)}`).join(\"#\")}};var Me=class{settings;properties;results=[];constructor(e,t){this.settings=t,this.properties=e.map((n,s)=>({...n,name:n.name||`$col_${s+1}`}))}push(e,t){let n={dbIds:[e],values:{}};for(let s of this.properties)n.values[s.name]=s.fun(this.settings,t);this.results.push(n)}compile(){return this.results}getColumns(){return this.properties.map(e=>e.name)}};var hr=(r,e)=>r.aggregateProperties.length===0?new Me(r.selectProperties,e):new Re(r.selectProperties,r.aggregateProperties,e);var Fn=(r,e)=>{try{let t=[],{lmvQuery:n,lmvQueryOptions:s,nodes:i}=e,l=new Ne(s).createQuery(n),a=new Oe(r,s.attributesCaseSensitive),p=cr(r,a),u=new Ce(r,a,p,s.modelBrowserExcludeRoot,s.modelName),c=hr(l,s);for(let h of i){if(s.leafNodesOnly&&r.getNodeNameAndChildren({dbId:h})!==void 0)continue;let m=new we(h,u);l.filter(m)&&(t.push(h),c.push(h,m))}return{dbIds:t,rows:c.compile(),columns:c.getColumns(),error:null}}catch(t){return{dbIds:[],error:t,rows:[],columns:[]}}};return Er(Tn);}";